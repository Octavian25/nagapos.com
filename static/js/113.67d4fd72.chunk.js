(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1160:function(e,a,t){"use strict";t.r(a);var n=t(19),l=t(20),r=t(50),i=t(22),s=t(21),m=t(0),o=t.n(m),c=t(42),d=t(75),b=t(38),u=t(287),p=t(288),g=t(24),h=t(7),k=t(90),f=function(e){Object(i.a)(t,e);var a=Object(s.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).state={date:new Date,kondisi_barang:"kosong",isLoadingBatal:!1},l}return Object(l.a)(t,[{key:"setStartDate",value:function(e){this.setState({tgl_awal:new Date(e)})}},{key:"setLastDate",value:function(e){this.setState({tgl_akhir:new Date(e)})}},{key:"render",value:function(){var e=this;return o.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-8"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(u.a,{onChange:this.props.getKodeMember,name:"kode_member",component:g.e,type:"text",label:"Kode Member",placeholder:"Masukan Kode Member"})),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(u.a,{id:"lihat_transaksi_nama_member",name:"nama_member",readOnly:!0,component:g.e,type:"text",label:"Nama Member",placeholder:"Masukan Nama Member"})))),o.a.createElement("div",{className:"col-4 text-center"},o.a.createElement(o.a.Fragment,null," \xa0 "),o.a.createElement("h1",{style:"POINT"===this.props.point?{fontSize:"4.875rem",position:"absolute",left:"56px",top:"25px"}:{fontSize:"4.875rem",position:"absolute",left:"110px",top:"25px"}}," ",this.props.point," ")),o.a.createElement("div",{className:"col-8"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(u.a,{id:"lihat_transaksi_alamat",name:"alamat",readOnly:!0,component:g.e,type:"text",label:"Alamat",placeholder:"Masukan Alamat"})),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(u.a,{id:"lihat_transaksi_no_hp",name:"no_hp",readOnly:!0,component:g.e,type:"text",label:"No Hp",placeholder:"Masukan No Hp"})))),o.a.createElement("div",{className:"col-4 text-center"}),o.a.createElement("div",{className:"col-lg-4"},o.a.createElement(u.a,{name:"dari_tanggal",component:g.c,type:"text",selected:this.state.tgl_awal,onChange:function(a){return e.setStartDate(a)},label:"Dari Tanggal",placeholder:"Masukan Dari Tanggal"})),o.a.createElement("div",{className:"col-lg-4"},o.a.createElement(u.a,{name:"sampai_tanggal",component:g.c,type:"text",selected:this.state.tgl_akhir,onChange:function(a){return e.setLastDate(a)},label:"Sampai Tanggal",placeholder:"Masukan Sampai Tanggal"})),o.a.createElement("div",{className:"col-lg-4"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",null,"\xa0"),o.a.createElement("button",{type:"submit",value:"PDF",name:"type_btn",className:"btn btn-primary btn-block"},this.props.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Lihat"):"Lihat")),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",null,"\xa0"),o.a.createElement("button",{type:"button",onClick:this.props.batalLihatTransaksi,className:"btn btn-warning btn-block"},this.props.isLoadingBatal?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal")))),o.a.createElement("div",{className:"col-12"},o.a.createElement(k.a,{keyField:"tgl_trx",exportCsv:!0,data:this.props.datatransaksimember,columns:this.props.columns,empty:!0,textEmpty:"Data Transaksi Member Kosong"}))))}}]),t}(m.Component);f=Object(p.a)({form:"HeadTransaksiMember",enableReinitialize:!0})(f);var E=Object(b.b)(function(e){return{initialValues:{dari_tanggal:Object(h.h)(),sampai_tanggal:Object(h.h)()},datakondisi:e.datamaster.getDataKondisiBarang,setHancurBarang:e.databarang.setHancurBarang}},null)(f),_=t(43),v=t(103),N=t(13),O=t(52),y=function(e){Object(i.a)(t,e);var a=Object(s.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).state={isLoading:!1,isLoadingBatal:!1,point:"POINT",datatransaksimember:[],columns:[{dataField:"tgl_trx",text:"Tanggal Trx",sort:!0},{dataField:"kategori",text:"Kategori"},{dataField:"deskripsi",text:"Deskripsi"},{dataField:"berat",text:"Berat",formatter:function(e){return o.a.createElement("span",null,parseFloat(e).toFixed(3))}},{dataField:"jumlah_rp",text:"Jumlah Rp",formatter:function(e){return o.a.createElement("span",null,parseFloat(e).toLocaleString("kr-KO"))}},{dataField:"poin_awal",text:"Poin Awal",formatter:function(e,a){return e||0}},{dataField:"poin",text:"Poin",formatter:function(e,a){return e||0}},{dataField:"poin_akhir",text:"Poin Akhir",formatter:function(e,a){return e||0}}]},l.handleSubmit=l.handleSubmit.bind(Object(r.a)(l)),l.getKodeMember=l.getKodeMember.bind(Object(r.a)(l)),l}return Object(l.a)(t,[{key:"batalLihatTransaksi",value:function(){var e=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){e.setState({isLoadingBatal:!1,datatransaksimember:[]}),e.props.dispatch(Object(O.e)("HeadTransaksiMember"))},1e3)}},{key:"getKodeMember",value:function(e){var a=this;clearTimeout(this.delay),this.delay=setTimeout(function(){if(void 0===e.kode_member)return!1;a.setState({isLoading:!0}),Object(N.c)("member/get/by-kode-member/"+e.kode_member).then(function(e){a.setState({isLoading:!1}),e.data.forEach(function(e,t){document.getElementById("lihat_transaksi_nama_member").value=e.nama_customer,document.getElementById("lihat_transaksi_alamat").value=e.alamat_customer,document.getElementById("lihat_transaksi_no_hp").value=e.no_hp,a.setState({datatransaksimember:[],point:e.point||0,isLoading:!1})})}).catch(function(e){Object(_.e)("info","Data member tidak ada"),a.setState({datatransaksimember:[],isLoading:!1})})},1500)}},{key:"handleSubmit",value:function(e){var a=this,t={kode_member:e.kode_member,tgl_awal:Object(h.e)(v(new Date(e.dari_tanggal)).format("YYYY-MM-DD")),tgl_akhir:Object(h.e)(v(new Date(e.sampai_tanggal)).format("YYYY-MM-DD"))};Object(N.h)("trxmember/get/by-tanggal",t).then(function(e){0===e.data.length?(Object(_.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1})):(Object(_.e)("success","Laporan Transaksi Member Tersedia"),Object(h.m)("tgl_laporan",JSON.stringify(t)),a.setState({export:!0,isLoading:!1,datatransaksimember:e.data}))}).catch(function(e){Object(_.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1})})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("ol",{className:"breadcrumb float-xl-right"},o.a.createElement("li",{className:"breadcrumb-item"},o.a.createElement(c.b,{to:"#"},"Member")),o.a.createElement("li",{className:"breadcrumb-item active"},"Lihat Transaksi Member")),o.a.createElement("h1",{className:"page-header"},"Lihat Transaksi Member "),o.a.createElement(d.a,null,o.a.createElement(d.c,null,"Lihat Transaksi Member"),o.a.createElement("br",null),o.a.createElement("div",{className:"container"},o.a.createElement(E,{onChange:function(a){return e.getKodeMember(a)},batalLihatTransaksi:function(){return e.batalLihatTransaksi()},onSubmit:function(a){return e.handleSubmit(a)},columns:this.state.columns,point:this.state.point,isLoadingBatal:this.state.isLoadingBatal,datatransaksimember:this.state.datatransaksimember}),o.a.createElement("br",null)),o.a.createElement("br",null)))}}]),t}(o.a.Component);y=Object(p.a)({form:"LihatTransaksiMember",enableReinitialize:!0})(y);a.default=Object(b.b)(null)(y)}}]);
//# sourceMappingURL=113.67d4fd72.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1152:function(a,e,t){"use strict";t.r(e);var n=t(19),i=t(20),o=t(50),r=t(22),d=t(21),s=t(0),l=t.n(s),c=t(42),b=t(75),u=t(11),m=t(38),k=t(29),p=t.n(k),h=t(43),f=t(13),g=t(52),_=t(7),B=t(90),E=t(287),O=t(288),j=t(24),v=function(a,e){var t={};return a.kode_gudang||(t.kode_gudang="Kode Gudang Tidak Boleh Kosong"),a.kode_baki||(t.kode_baki="Kode Baki Tidak Boleh Kosong"),a.nama_baki||(t.nama_baki="Nam Baki Tidak Boleh Kosong"),a.berat_baki||(t.berat_baki="Berat Baki Tidak Boleh Kosong"),a.berat_bandrol||(t.berat_bandrol="Berat Bandrol Tidak Boleh Kosong"),t},y=t(91),S=function(a){Object(r.a)(t,a);var e=Object(d.a)(t);function t(a){var i;return Object(n.a)(this,t),(i=e.call(this,a)).state={aktif:!1,listgroup:[],parameter_bandrol:"2301"},i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var a=this;Object(f.c)("gudang/get/all/master").then(function(e){a.setState({listgroup:e.data})}).catch(function(a){console.log(a)}),setTimeout(function(){a.props.isEdit?document.getElementById("nama_baki").focus():document.getElementById("kode_gudang").focus()},100),Object(f.c)("parabandrol/get/all").then(function(e){0===e.data.length?a.setState({parameter_bandrol:0}):a.setState({parameter_bandrol:e.data[0].berat_bandrol||0})}).then(function(){return a.props.change("berat_bandrol",a.state.parameter_bandrol)})}},{key:"setFocus",value:function(){setTimeout(function(){document.getElementById("kode_baki").focus()},100)}},{key:"render",value:function(){var a=this;return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},this.props.isEdit?l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{name:"id",component:j.b,type:"hidden",label:"Kode Baki",readOnly:this.props.isEdit})):null,l.a.createElement("div",{className:"form-group"},l.a.createElement(E.a,{tabIndex:"1",id:"kode_gudang",label:"Kode Gudang",name:"kode_gudang",options:this.state.listgroup.filter(function(a){return void 0!==a.kode_gudang}).map(function(a){return{value:a.kode_gudang,name:a.kode_gudang}}),value:this.props.kode_group,disabled:this.props.isEdit,onChange:function(){return a.setFocus()},placeholder:"Silahkan Pilih Kode Gudang",component:j.f})),l.a.createElement(E.a,{tabIndex:"2",id:"kode_baki",name:"kode_baki",component:j.e,type:"text",label:"Kode Baki",readOnly:this.props.isEdit,placeholder:"Masukan Kode Baki"}),l.a.createElement(E.a,{tabIndex:"3",id:"nama_baki",name:"nama_baki",component:j.e,type:"text",label:"Nama Baki",placeholder:"Masukan Nama Baki"}),l.a.createElement(E.a,{tabIndex:"4",name:"berat_baki",component:j.e,normalize:y.a,type:"text",label:"Berat Baki",placeholder:"Masukan Berat Baki"}),l.a.createElement(E.a,{tabIndex:"5",name:"berat_bandrol",component:j.e,type:"text",normalize:y.a,label:"Berat Bandrol",onBlur:function(){return a.setState({aktif:!0})},placeholder:"Masukan Berat Bandrol"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-right"},l.a.createElement("button",{className:"btn btn-white",onClick:function(){return a.props.dispatch(Object(u.Cb)())},type:"button",disabled:this.props.isLoading},"Batal"),"\xa0",l.a.createElement("button",{tabIndex:"6",className:this.state.aktif?"btn btn-primary":"btn btn-white",disabled:this.props.submitting,type:"submit"},this.props.isLoading?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"))))}}]),t}(s.Component);S=Object(O.a)({form:"ModalDataBaki",enableReinitialize:!0,validate:v})(S);var x=Object(m.b)(function(a){if(null!==a.datamaster.ShowModalBaki)return{initialValues:{id:a.datamaster.ShowModalBaki.id,kode_gudang:a.datamaster.ShowModalBaki.kode_gudang,kode_baki:a.datamaster.ShowModalBaki.kode_baki,nama_baki:a.datamaster.ShowModalBaki.nama_baki,berat_baki:a.datamaster.ShowModalBaki.berat_baki,berat_bandrol:a.datamaster.ShowModalBaki.berat_bandrol}}},null)(S),D=t(208),M=function(a,e,t){p.a.fire({html:"Apakah Anda Yakin Ingin Menghapus <h1><b>Kode Baki "+a+"</b> ?</h1>",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(a){a.isConfirmed&&Object(f.b)("baki/delete/by-kode-baki/"+e).then(function(){Object(h.d)("Data Berhasil Di Hapus").then(function(){return t(Object(u.lb)())})})}).catch(function(a){Object(h.e)("error",a.response.data)})},w=function(a){Object(r.a)(t,a);var e=Object(d.a)(t);function t(a){var i;return Object(n.a)(this,t),(i=e.call(this,a)).state={isEdit:!1,modalDialog:!1,isLoading:!1,columns:[{dataField:"kode_gudang",text:"Kode Gudang ",sort:!0},{dataField:"kode_baki",text:"Kode Baki"},{dataField:"nama_baki",text:"Nama Baki"},{dataField:"berat_baki",text:"Berat Baki",formatter:function(a){return a.toFixed(3)}},{dataField:"berat_bandrol",text:"Berat Bandrol",formatter:function(a){return a.toFixed(3)}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,e){var t={id:e._id,kode_gudang:e.kode_gudang,kode_baki:e.kode_baki,nama_baki:e.nama_baki,berat_baki:e.berat_baki.toFixed(3),berat_bandrol:e.berat_bandrol.toFixed(3)};return l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-12"},"TITIPJUAL"===e.kode_baki?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:function(){return i.formEditBaki(t)},className:"btn btn-primary mr-3"},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("button",{onClick:function(){return M(e.kode_baki,e._id,i.props.dispatch)},className:"btn btn-danger"},l.a.createElement("i",{className:"fa fa-trash"})))))}}]},i.handleSubmit=i.handleSubmit.bind(Object(o.a)(i)),i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(u.lb)())}},{key:"handleSubmit",value:function(a){var e=this;this.setState({isLoading:!0});var t={nama_baki:a.nama_baki,berat_bandrol:a.berat_bandrol,berat_baki:a.berat_baki},n={kode_baki:a.kode_baki,nama_baki:a.nama_baki,kode_gudang:a.kode_gudang,berat_bandrol:a.berat_bandrol,berat_baki:a.berat_baki};this.state.isEdit?Object(f.m)("baki/edit/by-kode-baki/"+a.id,t).then(function(){e.props.dispatch(Object(u.Cb)())}).then(function(){Object(h.e)("success","Data Berhasil Disimpan")}).then(function(){e.props.dispatch(Object(u.lb)())}).then(function(){e.setState({isLoading:!1})}).then(function(){e.props.dispatch(Object(g.e)("ModalDataBaki"))}).catch(function(a){Object(h.e)("info",void 0===a.response?"Terjadi Kesalahan Saat Megirim Data ":a.response.data),e.setState({isLoading:!1})}):Object(f.h)("baki/add",n).then(function(){e.props.dispatch(Object(u.Cb)())}).then(function(){Object(h.e)("success","Data Berhasil Disimpan")}).then(function(){e.props.dispatch(Object(u.lb)())}).then(function(){e.props.dispatch(Object(g.e)("ModalDataBaki"))}).then(function(){e.setState({isLoading:!1})}).catch(function(a){return Object(_.a)(a,"baki/reactive/by-kode-baki/",n,e.props.dispatch,Object(u.lb)(),Object(u.Cb)(),"ModalDataBaki").then(function(){e.setState({isLoading:!1})})})}},{key:"formEditBaki",value:function(a){this.props.dispatch(Object(u.Db)()),this.props.dispatch(Object(u.T)(a)),this.setState({isEdit:!0})}},{key:"ShowModalBaki",value:function(){this.props.dispatch(Object(u.Db)()),this.props.dispatch(Object(u.T)(!1)),this.setState({isEdit:!1})}},{key:"render",value:function(){var a=this;return l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(c.b,{to:"#"},"Data Master")),l.a.createElement("li",{className:"breadcrumb-item active"},"Master Baki")),l.a.createElement("h1",{className:"page-header"},"Master Baki "),l.a.createElement(b.a,null,l.a.createElement(b.c,null,"Master Baki"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement(B.a,{keyField:"kode_baki",tambahData:!0,handleClick:function(){return a.ShowModalBaki()},exportCsv:!0,data:this.props.DataBaki,columns:this.state.columns,empty:this.props.DataBaki,textEmpty:"Data Baki Kosong"})),l.a.createElement("br",null),l.a.createElement(D.a,{size:"P",title:this.state.isEdit?"Edit Data Baki":"Tambah Data Baki",content:l.a.createElement(x,{isLoading:this.state.isLoading,isEdit:this.state.isEdit,onSubmit:function(e){return a.handleSubmit(e)}})})))}}]),t}(l.a.Component);e.default=Object(m.b)(function(a){return{DataBaki:a.datamaster.getDataBaki,hideModal:a.datamaster.modalDialog}},null)(w)}}]);
//# sourceMappingURL=54.a611f8ef.chunk.js.map
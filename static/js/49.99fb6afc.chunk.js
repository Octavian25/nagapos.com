(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1163:function(a,t,e){"use strict";e.r(t);var n=e(19),i=e(20),r=e(22),o=e(21),l=e(0),b=e.n(l),s=e(42),d=e(75),c=e(23),m=e(38),u=e(7),g=e(287),p=e(288),k=e(11),_=e(24),h=e(58),f=e.n(h),v=e(84),O=e.n(v),E=e(789),F=e.n(E),j=e(13),S=e(43),x=e(143),y=e(268),B=function(a){Object(r.a)(e,a);var t=Object(o.a)(e);function e(a){var i;return Object(n.a)(this,e),(i=t.call(this,a)).state={no_kirim:[],datagudang:[],isLoading:!1,loading:!1,timbangan:0,columns:[{dataField:"kode_gudang",text:"Gudang",sort:!0,editable:!1},{dataField:"kode_toko",text:"Baki",editable:!1},{dataField:"qty",text:"Qty",editable:!1},{dataField:"berat",text:"Berat",editable:!1},{dataField:"berat_baki",text:"Berat baki",editable:!1},{dataField:"berat_plastik",text:"Berat Plastik",editable:!1,formatter:function(a,t){return parseFloat(t.berat_plastik).toFixed(2)}},{dataField:"berat_atribut",text:"Berat Atribut",editable:!1,formatter:function(a,t){return parseFloat(t.berat_atribut).toFixed(2)}},{dataField:"berat_bandrol",text:"Berat Bandrol",editable:!1,formatter:function(a,t){return parseFloat(t.berat_bandrol).toFixed(2)}},{dataField:"total",text:"Total",editable:!1,formatter:function(a,t){return parseFloat(t.berat+t.berat_baki+t.berat_bandrol+t.berat_atribut+t.berat_plastik).toFixed(2)}},{dataField:"timbang",text:"Timbang"},{dataField:"selisih",text:"Selisih",formatter:function(a,t){return parseFloat(t.selisih).toFixed(2)}}]},i}return Object(i.a)(e,[{key:"componentDidMount",value:function(){y.io.connect("http://147.139.193.169:4001/api/v1/".replace("/api/v1/","")).on("timbangan",function(a){Object(u.j)().user_id===a.user_id&&(window.document.activeElement.value=a.value)}),this.props.dispatch(Object(k.nb)()),this.props.dispatch(Object(k.lb)()),this.props.dispatch(Object(x.f)())}},{key:"sendTimbangan",value:function(){var a=this,t={tanggal:Object(u.i)(),detail_barang:this.props.timbang_barang};this.setState({isLoading:!0}),Object(j.i)("timbang-baki",t).then(function(t){a.setState({isLoading:!1}),Object(S.e)("success","Data Berhasil Disimpan"),a.props.dispatch(Object(c.x)([]))}).catch(function(t){a.setState({isLoading:!1}),Object(S.e)("error",t&&t.response&&t.response.data&&"Terjadi kersalahan saat menimbang baki")})}},{key:"render",value:function(){var a=this,t=[{value:"ALL",name:"SEMUA"}];return this.props.databaki.forEach(function(a){var e={value:a.kode_baki,name:a.kode_baki+" - "+a.nama_baki};t.push(e)}),b.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"col-lg-4"},b.a.createElement(g.a,{id:"kode_gudang",label:"Kode Gudang",name:"kode_gudang",onChange:function(t){a.setState({kode_gudang:t}),a.props.change("kode_baki",""),a.props.dispatch(Object(k.mb)(t))},options:this.props.datagudang.filter(function(a){return void 0!==a.kode_gudang}).map(function(a){return{value:a.kode_gudang,name:a.kode_gudang+" - "+a.nama_gudang}}),placeholder:"Silahkan Pilih Kode Gudang",component:_.f})),b.a.createElement("div",{className:"col-lg-4"},b.a.createElement(g.a,{id:"kode_baki",label:"Kode Baki",name:"kode_baki",onChange:function(t){a.setState({kode_baki:t}),a.props.change("kode_baki","")},options:t,placeholder:"Silahkan Pilih Kode Baki",component:_.f})),b.a.createElement("div",{className:"col-lg-4"},b.a.createElement("label",{htmlFor:""},"\xa0"),b.a.createElement("button",{className:"btn btn-outline-secondary btn-block"},"Cari"))),b.a.createElement(O.a,{keyField:"baki",data:this.props.products||[],columns:this.state.columns||[],cellEdit:F()({mode:"click",blurToSave:!0,afterSaveCell:function(t,e,n,i){var r={kode_gudang:n.kode_gudang,kode_toko:n.kode_toko,qty:n.qty,berat:n.berat,berat_baki:n.berat_baki,berat_bandrol:n.berat_bandrol,berat_atribut:n.berat_atribut,berat_plastik:n.berat_plastik,total:parseFloat(n.berat_baki)+parseFloat(n.berat_bandrol)+parseFloat(n.berat_atribut)+parseFloat(n.berat_plastik)+parseFloat(n.berat),timbang:parseFloat(e),selisih:parseFloat((parseFloat(n.berat_baki+n.berat_bandrol+n.berat+n.berat_plastik+n.berat_atribut)-parseFloat(e||0)).toFixed(3)||0)},o=0===Object(u.l)("timbang_barang").length?[]:JSON.parse(Object(u.l)("timbang_barang")),l=o.findIndex(function(a){return a.kode_toko===r.kode_toko});-1===l?(o.push(r),Object(u.m)("timbang_barang",JSON.stringify(o)),a.props.dispatch(Object(c.x)(o))):(o[l]=r,Object(u.m)("timbang_barang",JSON.stringify(o)),a.props.dispatch(Object(c.x)(o)))}})}),b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"col-lg-8"}),b.a.createElement("div",{className:"col-lg-4 text-right"},b.a.createElement("label",{htmlFor:""},"\xa0"),b.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return a.sendTimbangan()}},this.state.isLoading?b.a.createElement(b.a.Fragment,null,b.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"))),this.state.isLoading?b.a.createElement(f.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),e}(l.Component);B=Object(p.a)({form:"FormTimbangBarang",enableReinitialize:!0})(B);var N=Object(m.b)(function(a){var t=null===localStorage.getItem("data_terima_barang")?[]:JSON.parse(localStorage.getItem("data_terima_barang")||[]);return{getDataTimbangan:a.utility.getTimbangan,initialValues:{no_kirim:t.no_kirim||""},datagudang:a.datamaster.getDataGudang,databaki:a.datamaster.getDataBaki,timbang_barang:a.databarang.getTimbangBarang}},null)(B),T=function(a){Object(r.a)(e,a);var t=Object(o.a)(e);function e(a){var i;return Object(n.a)(this,e),(i=t.call(this,a)).state={isEdit:!1,modalDialog:!1,isLoading:!1,isLoadingBtn:!1,DataTimbangBarang:[],SimpanDataBarang:!1,resetTimbangBarang:!1,products:[{gudang:"TOKO",baki:"KLNG",qty:10,berat:200,berat_baki:100,berat_bandrol:.2,total:1250,timbang:0,selisih:0},{gudang:"TOKO",baki:"GLNG",qty:10,berat:200,berat_baki:100,berat_bandrol:.2,total:1250,timbang:0,selisih:0}]},i}return Object(i.a)(e,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(c.o)()),this.setState({products:Object(u.l)("timbang_barang")})}},{key:"handleSubmit",value:function(a){this.props.dispatch(Object(c.p)(a.kode_gudang,a.kode_baki,Object(u.i)()))}},{key:"render",value:function(){var a=this;return b.a.createElement("div",null,b.a.createElement("ol",{className:"breadcrumb float-xl-right"},b.a.createElement("li",{className:"breadcrumb-item"},b.a.createElement(s.b,{to:"#"},"Barang")),b.a.createElement("li",{className:"breadcrumb-item active"},"Timbang Baki")),b.a.createElement("h1",{className:"page-header"},"Timbang Baki "),b.a.createElement(d.a,null,b.a.createElement(d.c,null,"Timbang Baki"),b.a.createElement("br",null),b.a.createElement("div",{className:"container"},b.a.createElement(N,{handleChange:function(){return a.handleChange()},column:this.state.columns||[],products:this.props.timbang_barang||[],onSubmit:function(t){return a.handleSubmit(t)}})),b.a.createElement("br",null)))}}]),e}(b.a.Component);t.default=Object(m.b)(function(a){return{timbang_barang:a.databarang.getTimbangBarang}},null)(T)}}]);
//# sourceMappingURL=49.99fb6afc.chunk.js.map
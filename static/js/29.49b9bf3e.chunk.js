(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1118:function(a,e,t){"use strict";t.r(e);var n=t(19),r=t(20),o=t(22),s=t(21),i=t(0),l=t.n(i),c=t(38),m=t(42),d=t(29),p=t.n(d),u=t(60),g=t(75),h=t(287),b=t(288),_=t(291),f=t(76),k=t(11),v=t(24),S=t(7),E=t(43),O=t(13),N=function(a){var e={};return a.kode_dept||(e.kode_dept="Kode Jenis Harus Dipilih"),a.nama_barang||(e.nama_barang="Nama Barang Tidak Boleh Kosong"),a.berat||(e.berat="Berat Tidak Boleh Kosong"),a.harga||(e.harga="Harga Tidak Boleh Kosong"),a.harga_rata||(e.harga_rata="Harga Rata Tidak Boleh Kosong"),a.kondisi||(e.kondisi="Kondisi Harus Dipilih"),e},j=t(58),B=t.n(j),y=t(91),M=Object(f.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),I=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,harga_jual:!0,hargapergram:!0,ongkos:!0,total:!0},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(k.ub)()),this.props.dispatch(Object(k.pb)()),this.props.dispatch(Object(k.wb)()),setTimeout(function(){document.getElementById("kode_barcode").focus(),HideKeyboard.postMessage("hide")},100)}},{key:"getBarcode",value:function(a){var e=this;clearTimeout(this.delay),this.delay=setTimeout(function(){e.setState({searching:!0});var t=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"))||[];document.getElementById("kode_barcode").focus(),-1===t.findIndex(function(e){return e.kode_barcode===a})?Object(O.c)("pembelian/get/jual/"+a).then(function(a){0===a.data.length?(Object(E.e)("info","Data Yang Dicari Tidak Ada"),e.props.change("nama_barang",""),e.props.change("nama_atribut",""),e.props.change("berat_atribut",""),e.props.change("harga_atribut",""),e.props.change("berat",""),e.props.change("berat_nota",""),e.props.change("kode_dept",""),e.props.change("harga",""),e.props.change("harga_nota",""),e.setState({searching:!1})):(e.setState({searching:!1}),a.data.forEach(function(a,t){var n=Object(S.g)("data_customer_pembelian_tmp");if(null===n||0===n.length){var r={kode_sales:a.kode_sales,jenis_pelanggan:"NONMEMBER"===a.kode_member?"NONMEMBER":"MEMBER",kode_customer:a.kode_member,nama_customer:a.nama_customer,alamat_customer:a.alamat_customer,no_hp:a.no_hp};localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(r)),e.props.change("nama_barang",a.nama_barang),e.props.change("nama_atribut",a.nama_atribut),e.props.change("berat_atribut",a.berat_atribut),e.props.change("harga_atribut",a.harga_atribut),e.props.change("berat_nota",a.berat),e.props.change("berat",a.berat),e.props.change("kode_dept",a.kode_dept),e.props.change("harga_nota",parseInt(a.harga_jual)+parseInt(a.harga_atribut)),e.setState({harga_jual:!1,hargapergram:!1,ongkos:!1})}else{if(e.setState({searching:!1}),a.kode_member!==n.kode_customer)return Object(E.e)("info","Data Customer Berbeda"),!1;var o={kode_sales:a.kode_sales,jenis_pelanggan:"NONMEMBER"===a.kode_member?"NONMEMBER":"MEMBER",kode_customer:a.kode_member,nama_customer:a.nama_customer,alamat_customer:a.alamat_customer,no_hp:a.no_hp};localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(o)),e.props.change("kadar",a.kadar),e.props.change("nama_barang",a.nama_barang),e.props.change("nama_atribut",a.nama_atribut),e.props.change("berat_atribut",a.berat_atribut),e.props.change("harga_atribut",a.harga_atribut),e.props.change("berat_nota",a.berat),e.props.change("berat",a.berat),e.props.change("kode_dept",a.kode_dept),e.props.change("harga_nota",parseInt(a.harga_jual)+parseInt(a.harga_atribut)),e.setState({harga_jual:!1,hargapergram:!1,ongkos:!1,searching:!1})}}))}).catch(function(a){console.log(a),e.props.change("nama_barang",""),e.props.change("nama_atribut",""),e.props.change("berat_atribut",""),e.props.change("harga_atribut",""),e.props.change("berat",""),e.props.change("kadar",""),e.props.change("kode_dept",""),e.props.change("harga",""),Object(E.e)("info","Data Yang Dicari Tidak Ada"),e.setState({searching:!1})}):(e.props.change("nama_barang",""),e.props.change("nama_atribut",""),e.props.change("berat_atribut",""),e.props.change("harga_atribut",""),e.props.change("kadar",""),e.props.change("berat",""),e.props.change("kode_dept",""),e.props.change("harga",""),Object(E.e)("info","Kode Barcode Sudah Ada Dalam Table"),e.setState({searching:!1}))},1500)}},{key:"hitungTotal",value:function(){this.props.change("harga_rata",this.props.harga_rata)}},{key:"setValue",value:function(a){""===a&&this.change("berat_nota",1)}},{key:"getHarga",value:function(a){var e=this,t=a.split("~");Object(O.c)("parabeli/get/by-kode-kondisi/"+t[0]).then(function(a){e.props.change("potongan",a.data.potongan),e.props.change("harga",e.props.harga_beli)})}},{key:"render",value:function(){var a=this;return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(h.a,{id:"potongan",name:"potongan",component:v.b,type:"hidden",readOnly:!0}),l.a.createElement(h.a,{onChange:function(e){return a.getBarcode(e.target.value)},id:"kode_barcode",name:"kode_barcode",label:"Kode Barcode",type:"number",normalize:function(a){return a.replace(/[^\d]/g,"")},placeholder:"Masukan Kode Barcode",component:v.e})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(h.a,{name:"kondisi",label:"Kondisi",onChange:function(e){return a.getHarga(e)},options:this.props.datakondisi.filter(function(a){return void 0!==a.kondisi_barang}).map(function(a){return{value:a._id+"~"+a.kondisi_barang,name:a.kondisi_barang}||[]}),placeholder:"Pilih Kondisi",component:v.f})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(h.a,{label:"Kode Jenis",name:"kode_dept",options:this.props.datajenis.filter(function(a){return void 0!==a.kode_dept}).map(function(a){return{value:a.kode_dept,name:a.kode_dept+" - "+a.nama_dept}||[]}),placeholder:"Silahkan Pilih Kode Jenis",component:v.f})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(h.a,{name:"nama_barang",label:"Nama Barang",type:"text",placeholder:"Masukan Nama Barang",component:v.e})),l.a.createElement("div",{className:"col-12 col-md-2"},l.a.createElement(h.a,{name:"kadar",label:"Kadar",type:"tel",readOnly:!0,normalize:y.c,placeholder:"Masukan Kadar",component:v.e})),l.a.createElement("div",{className:"col-12 col-md-2"},l.a.createElement(h.a,{name:"berat_nota",label:"Berat Nota",readOnly:!0,normalize:y.a,placeholder:"Masukan Berat Nota",component:v.e})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(h.a,{id:"berat",name:"berat",label:"Berat",type:"number",normalize:y.a,onChange:this.hitungTotal(),placeholder:"Masukan Berat",component:v.e})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(h.a,Object.assign({name:"harga_nota",label:"Harga Nota",type:"tel",readOnly:!0,onChange:this.hitungTotal()},M,{placeholder:"Masukan Harga Nota",component:v.e}))),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(h.a,Object.assign({name:"harga",label:"Harga Beli",type:"tel"},M,{onChange:this.hitungTotal(),placeholder:"Masukan Harga Beli",component:v.e}))),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(h.a,Object.assign({name:"harga_rata",label:"Harga Rata",type:"tel",readOnly:!0},M,{placeholder:"Masukan Harga Rata",component:v.e}))),l.a.createElement("div",{className:"col-12 col-md-12 text-right"},l.a.createElement("label",null,"\xa0"),l.a.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoadingSimpanBarang,type:"submit"},this.props.isLoadingSimpanBarang?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Barang"))),this.state.searching?l.a.createElement(B.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(i.Component);I=Object(b.a)({form:"ModalTambahBarang",enableReinitialize:!0,validate:N})(I);var D=Object(_.a)("ModalTambahBarang"),C=Object(c.b)(function(a){var e=D(a,"harga","berat","harga_nota","potongan"),t=e.harga,n=e.berat,r=e.potongan,o=e.harga_nota,s=parseInt(r||0)*parseFloat(n||0);return{setBarangPembelian:a.penjualan.setBarangPembelian,harga_rata:parseFloat(t||0)/parseFloat(n||0)||0,harga_potong:parseInt(o||0)-parseInt(s||0),harga_beli:parseInt(o||0)-parseInt(s||0),DataSales:a.datamaster.getDataSales,datajenis:a.datamaster.getDataJenis,harga_nota:o,datakondisi:a.datamaster.getKondisiPembelian,initialValues:{kadar:100}}})(I),K=t(52),L=t(668),x=[{value:"MEMBER",name:"MEMBER"},{value:"NONMEMBER",name:"NON MEMBER"}],T=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={showMember:!0},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(k.ub)());var a=null===localStorage.getItem("data_customer_pembelian_tmp")?[]:JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")||[]);a&&"MEMBER"===a.jenis_pelanggan?this.setState({showMember:!1}):this.setState({showMember:!0})}},{key:"changemember",value:function(a){"MEMBER"===a?this.setState({showMember:!1}):(this.props.change("kode_customer",""),this.props.change("nama_customer",""),this.props.change("no_hp",""),this.props.change("alamat_customer",""),this.setState({showMember:!0}))}},{key:"getMember",value:function(a){var e=this;Object(O.c)("member/get/by-kode-member/"+a).then(function(a){0===a.data.length?Object(E.e)("info","Member Yang Anda Masukan Tidak Ada !!!"):a.data.forEach(function(a,t){e.props.change("nama_customer",a.nama_customer),e.props.change("no_hp",a.no_hp),e.props.change("alamat_customer",a.alamat_customer)})}).catch(function(a){Object(E.e)("info","Terjadi Kesalahan SIlahkan Ulangi Kembali !!!")})}},{key:"render",value:function(){var a=this;return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-4"},l.a.createElement(h.a,{tabIndex:"1",name:"kode_sales",label:"Pilih Kode Sales",placeholder:"Masukan Kode Sales",options:this.props.DataSales.filter(function(a){return void 0!==a.kode_sales}).map(function(a){return{value:a.kode_sales,name:a.kode_sales}}),component:v.f})),l.a.createElement("div",{className:"col-4"},l.a.createElement(h.a,{tabIndex:"2",name:"jenis_pelanggan",label:"Pilih Pelanggan",onChange:function(e){return a.changemember(e)},placeholder:"Silahkan Pilih Pelanggan",options:x,component:v.f})),l.a.createElement("div",{className:"col-4"},l.a.createElement(h.a,{tabIndex:"3",name:"kode_customer",onChange:function(e){return a.getMember(e.target.value)},component:v.e,type:"text",readOnly:this.state.showMember,label:"Kode Customer",placeholder:"Masukan Kode Customer"})),l.a.createElement("div",{className:"col-4"},l.a.createElement(h.a,{tabIndex:"4",name:"nama_customer",component:v.e,type:"text",label:"Nama Customer",placeholder:"Masukan Nama Customer"})),l.a.createElement("div",{className:"col-4"},l.a.createElement(h.a,{tabIndex:"5",name:"no_hp",component:v.e,type:"number",label:"No Hp",placeholder:"Masukan No Hp"})),l.a.createElement("div",{className:"col-4"},l.a.createElement(h.a,{tabIndex:"6",name:"alamat_customer",component:v.e,type:"textarea",label:"Alamat Customer",placeholder:"Masukan Alamat Customer"}))))}}]),t}(i.Component);T=Object(b.a)({form:"ModalDataCustomer",enableReinitialize:!0,validate:L.a})(T);var J=Object(c.b)(function(a){var e=null===localStorage.getItem("data_customer_pembelian_tmp")?[]:JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")||[]);return{initialValues:{kode_sales:e.kode_sales||"",jenis_pelanggan:e.jenis_pelanggan||"",kode_customer:e.kode_customer||"",nama_customer:e.nama_customer||"",no_hp:e.no_hp||"",alamat_customer:e.alamat_customer||""},DataSales:a.datamaster.getDataSales}},null)(T),H=t(90),P=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,harga_jual:!0,hargapergram:!0,ongkos:!0,total:!0},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(k.ub)()),this.props.dispatch(Object(k.pb)()),this.props.dispatch(Object(k.wb)())}},{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("div",null,l.a.createElement(H.a,{keyField:"nama_barang",exportCsv:!1,data:0===this.props.setBarangPembelian.length?JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")):this.props.setBarangPembelian,columns:this.props.columns,empty:!0,textEmpty:"Data Barang Kosong"})),l.a.createElement("div",{className:"col-lg-12 text-right"},l.a.createElement("button",{className:"btn btn-primary btn-block btn-lg",disabled:this.props.isLoadingSimpanBarang,type:"submit"},this.props.isLoadingSimpanBarang?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Selesai")))))}}]),t}(i.Component);P=Object(b.a)({form:"LihatDataBarang",enableReinitialize:!0,validate:N})(P);var F=Object(_.a)("LihatDataBarang"),R=Object(c.b)(function(a){var e=F(a,"harga","berat"),t=e.harga,n=e.berat;return{setBarangPembelian:a.penjualan.setBarangPembelian,harga_rata:parseFloat(t||0)/parseFloat(n||0)||0,DataSales:a.datamaster.getDataSales,datajenis:a.datamaster.getDataJenis,datakondisi:a.datamaster.getKondisiPembelian}})(P),w=t(208),A=t(28),z=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,step:0,isLoadingBatal:!1,isLoadingSimanBeli:!1,isLoadingDataCustomer:!1,isLoadingSimpanBarang:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"3"},footer:"Total"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"kode_dept",text:"Jenis"},{dataField:"harga_nota",text:"Harga Nota",formatter:function(a){return l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}},{dataField:"berat_nota",text:"Berat Nota",formatter:function(a){return l.a.createElement("span",null,parseFloat(a).toFixed(3))},footer:function(a){return parseFloat(a.reduce(function(a,e){return a+e},0)).toFixed(3)}},{dataField:"berat",text:"Berat",formatter:function(a){return l.a.createElement("span",null,parseFloat(a).toFixed(3))},footer:function(a){return parseFloat(a.reduce(function(a,e){return a+e},0)).toFixed(3)}},{dataField:"harga",text:"Harga Beli",formatter:function(a){return l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}},{dataField:"kondisi",text:"Kondisi",footer:""},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,e,t){return l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{type:"button",onClick:function(){return r.hapusdata(t)},className:"btn btn-danger mr-3"},l.a.createElement("i",{className:"fa fa-trash"}))))},footer:""}]},r}return Object(r.a)(t,[{key:"hapusdata",value:function(a){var e=this;p.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(t){if(t.isConfirmed){var n=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"));n.splice(a,1),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify(n)),0===n.length&&e.setState({step:0}),e.props.dispatch(Object(u.k)(n))}})}},{key:"simpanBarang",value:function(a){var e=a.kondisi.split("~"),t={kode_barcode:void 0===a.kode_barcode?"-":a.kode_barcode,nama_barang:a.nama_barang,kondisi:e[1],kadar:parseInt(a.kadar||0),kode_dept:a.kode_dept,harga_rata:parseInt(a.harga_rata),harga_nota:parseInt(a.harga_nota)||0,harga:parseInt(a.harga),berat_nota:parseFloat(a.berat_nota)||0,berat:parseFloat(a.berat)};if(this.setState({hasil:t}),void 0===a.kode_barcode)this.sendRequest(a);else{if(a.harga_nota<a.harga)return Object(E.e)("info","Harga Melebihi Nota"),this.props.dispatch(Object(k.Db)()),!1;this.sendRequest(a)}}},{key:"sendRequest",value:function(a){var e=this,t=a.kondisi.split("~");this.setState({isLoadingSimpanBarang:!0,step:1});var n={kode_barcode:void 0===a.kode_barcode?"-":a.kode_barcode,nama_barang:a.nama_barang,kondisi:t[1],kode_dept:a.kode_dept,kadar:parseInt(a.kadar||0),harga_rata:parseInt(a.harga_rata),harga_nota:parseInt(a.harga_nota)||0,harga:parseInt(a.harga),berat_nota:parseFloat(a.berat_nota)||0,berat:parseFloat(a.berat)};if(void 0===a.kondisi)return!1;var r=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"))||[];-1===r.findIndex(function(e){return e.kode_barcode===a.kode_barcode})?(r.push(n),Object(E.e)("success","Barang Berhasil Ditambahkan"),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify(r)),this.props.dispatch(Object(u.k)(r)),this.props.dispatch(Object(K.d)("ModalTambahBarang")),setTimeout(function(){e.setState({isLoadingSimpanBarang:!1})},200)):(setTimeout(function(){e.setState({isLoadingSimpanBarang:!1})},200),document.getElementById("kode_barcode").focus(),Object(E.e)("info","Barang Sudah Ada Di Tabel"))}},{key:"cekOtorisasi",value:function(a){var e=this,t={user_id:a.username,password:a.password,kategori:"PEMBELIAN",description:"PEMBELIAN DI ATAS NOTA",keterangan:a.keterangan.toUpperCase()||"-"};Object(O.i)("authorization",t).then(function(a){e.sendRequest(e.state.hasil),Object(E.e)("success",a.data.message),localStorage.setItem("otorisasi","false"),e.setState({otorisasi:!0}),e.props.dispatch(Object(k.Cb)())}).catch(function(a){e.setState({otorisasi:!1}),Object(E.e)("info","Otorisasi Gagal..")})}},{key:"handleCustomer",value:function(a){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(a))}},{key:"handleSubmit",value:function(a){var e=this;this.setState({isLoading:!0}),setTimeout(function(){var a=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),t=0;a.forEach(function(a,e){t+=a.harga});var n={jenis:"CASH",jumlah_rp:t},r=JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")),o=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),s=[];o.forEach(function(a,e){var t={kode_dept:a.kode_dept,nama_barang:a.nama_barang,berat_nota:a.berat_nota,harga:a.harga,berat:a.berat,kadar:a.kadar||0,harga_nota:a.harga_nota,kondisi:a.kondisi,kode_barcode:a.kode_barcode};s.push(t)});var i={kode_sales:r.kode_sales,nama_customer:r.nama_customer,kode_member:"NONMEMBER"===r.jenis_pelanggan?r.jenis_pelanggan:r.kode_customer,alamat_customer:r.alamat_customer,no_hp:r.no_hp,detail_barang:s,pembayaran:[n]};Object(O.h)("pembelian/simpan",i).then(function(a){var e="";[a.data.notabeli].forEach(function(a,t){var n=a.head.n_alamat_customer.length;e+="========================================\n",e+="              NOTA PEMBELIAN            \n",e+="========================================\nTanggal          : ".concat(a.head.tgl_system,"\nNama Customer    : ").concat(a.head.nama_customer,"\nNo Hp            : ").concat(a.head.no_hp,"\nAlamat Customer  : ").concat(a.head.n_alamat_customer.slice(0,20),"\n"),n>20&&(e+="                   ".concat(a.head.n_alamat_customer.slice(20,40),"\n")),n>40&&(e+="                   ".concat(a.head.n_alamat_customer.slice(40,60),"\n")),e+="========================================\n",e+="Keterangan\n",e+="========================================\n";var r=0,o=0;a.detail.forEach(function(a,t){r+=a.harga,o+=a.harga_nota,e+="No Faktur Beli : ".concat(a.no_faktur_beli,"\n"),e+="Jenis Barang   : ".concat(a.kode_dept,"\n"),e+="Nama Barang    : ".concat(a.nama_barang,"\n"),e+="Berat          : ".concat(a.berat.toFixed(3),"\n"),e+="Harga          : ".concat(a.harga.toLocaleString("kr-KO"),"\n"),e+="========================================\n"}),e+="Total          : ".concat(r.toLocaleString("kr-KO"),"\n"),e+="========================================\n",e+="Harga Waktu Beli   : ".concat(r.toLocaleString("kr-KO"),"\n"),e+="Harga Waktu Jual   : ".concat(o.toLocaleString("kr-KO"),"\n"),e+="========================================\n",e+="\n\n\n\n\n\n\n",e+="========================================\n",e+="              NOTA PEMBELIAN            \n",e+="========================================\nTanggal          : ".concat(a.head.tgl_system,"\nNama Customer    : ").concat(a.head.nama_customer,"\nNo Hp            : ").concat(a.head.no_hp,"\nAlamat Customer  : ").concat(a.head.n_alamat_customer.slice(0,20),"\n"),n>20&&(e+="                   ".concat(a.head.n_alamat_customer.slice(20,40),"\n")),n>40&&(e+="                   ".concat(a.head.n_alamat_customer.slice(40,60),"\n")),e+="========================================\n",e+="Keterangan\n",e+="========================================\n",a.detail.forEach(function(a,t){r+=a.harga,o+=a.harga_nota,e+="No Faktur Beli : ".concat(a.no_faktur_beli,"\n"),e+="Jenis Barang   : ".concat(a.kode_dept,"\n"),e+="Nama Barang    : ".concat(a.nama_barang,"\n"),e+="Berat          : ".concat(a.berat.toFixed(3),"\n"),e+="Harga          : ".concat(a.harga.toLocaleString("kr-KO"),"\n"),e+="========================================\n"}),e+="Total          : ".concat(r.toLocaleString("kr-KO"),"\n"),e+="========================================\n",e+="Harga Waktu Beli   : ".concat(r.toLocaleString("kr-KO"),"\n"),e+="Harga Waktu Jual   : ".concat(o.toLocaleString("kr-KO"),"\n"),e+="========================================\n",e+="\n\n\n\n\n\n\n"}),console.log(e),Print.postMessage(e),Object(E.e)("success",a.data.message)}).then(function(){e.setState({isLoading:!1})}).then(function(){e.props.dispatch(Object(K.d)("ModalPembayaran"))}).then(function(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}).then(function(){e.props.dispatch(Object(u.k)([])),e.setState({step:0})}).catch(function(a){return e.errorhandling(a)})},500)}},{key:"back",value:function(a){this.setState({step:a})}},{key:"simpanPembayaran",value:function(a){var e=this;if("CASH"!==a.jenis&&a.kembali.replace(/[^0-9]/g,"")-a.cash<0)return Object(E.e)("info","Pembayaran tidak boleh lebih dari sisa"),!1;this.setState({isLoading:!0});var t=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"));t.forEach(function(a,e){a.harga});var n=0;n=a.cash>a.grand_total_pembayaran?a.grand_total_pembayaran:a.cash;var r={jenis:a.jenis,jumlah_rp:n};if(parseInt(a.cash)<parseInt(a.grand_total_pembayaran)){var o=parseInt(a.grand_total_pembayaran)-parseInt(a.cash);return Object(E.e)("info","Pembayaran Masih Kurang Rp."+parseInt(o).toLocaleString("kr-KO")),this.setState({isLoading:!1}),!1}var s=JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")),i=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),l=[];i.forEach(function(a,e){var t={kode_dept:a.kode_dept,nama_barang:a.nama_barang,berat_nota:a.berat_nota,harga:a.harga,berat:a.berat,harga_nota:a.harga_nota,kondisi:a.kondisi,kode_barcode:a.kode_barcode};l.push(t)});var c={kode_sales:s.kode_sales,nama_customer:s.nama_customer,kode_member:"NONMEMBER"===s.jenis_pelanggan?s.jenis_pelanggan:s.kode_customer,alamat_customer:s.alamat_customer,no_hp:s.no_hp,detail_barang:l,pembayaran:[r]};Object(O.h)("pembelian/simpan",c).then(function(a){Object(E.e)("success",a.data.message)}).then(function(){e.setState({isLoading:!1})}).then(function(){e.props.dispatch(Object(K.d)("ModalPembayaran"))}).then(function(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}).then(function(){e.props.dispatch(Object(u.k)([])),e.setState({step:0})}).catch(function(a){return e.errorhandling(a)})}},{key:"componentWillUnmount",value:function(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}},{key:"componentDidMount",value:function(){this.context.handleSetPageSidebar(!1),this.context.handleSetPageHeader(!1)}},{key:"errorhandling",value:function(a){this.setState({isLoading:!1}),Object(E.e)("info","Transaksi Gagal Disimpan")}},{key:"nextLihatDataBarang",value:function(){if(null==localStorage.getItem("data_barang_pembelian_tmp")||0===JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")).length)return Object(E.e)("info","Data Barang Tidak Boleh Kosong"),!1;this.setState({step:1})}},{key:"btlPembelian",value:function(){var a=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),a.props.dispatch(Object(u.k)([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([])),a.setState({isLoadingBatal:!1})},500)}},{key:"render",value:function(){var a=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{to:"/SubMenuPembelian"},l.a.createElement("button",{type:"button",className:"btn btn-secondary","data-tut":"reactour_4"},l.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," Home")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(g.c,null,"Transaksi Pembelian"),l.a.createElement("div",{className:"row mt-4"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{class:"container"},l.a.createElement("button",{className:"btn btn-warning mb-4",type:"button",onClick:function(){return a.props.dispatch(Object(k.Db)())}}," + Data Customer"),l.a.createElement(C,{isLoadingSimpanBarang:this.state.isLoadingSimpanBarang,columns:this.state.columns,onSubmit:function(e){return a.simpanBarang(e)}}),l.a.createElement(R,{isLoadingSimpanBarang:this.state.isLoadingSimpanBarang,columns:this.state.columns,onSubmit:function(e){return a.handleSubmit(e)}})))),l.a.createElement("br",null)),l.a.createElement(w.a,{title:"Data Customer",size:"xl",content:l.a.createElement(J,{isLoading:this.state.isLoading,back:function(){return a.back(1)},isLoadingDataCustomer:this.state.isLoadingDataCustomer,onSubmit:function(e){return a.handleSubmit(e)}})})))}}]),t}(l.a.Component);z.contextType=A.a;e.default=Object(c.b)(function(a){var e,t,n,r,o,s,i,l,c,m,d,p,u,g,h,b,_,f,k;return{setBarangPembelian:a.penjualan.setBarangPembelian,kode_sales:null===(e=a.form)||void 0===e?void 0:null===(t=e.ModalDataCustomer)||void 0===t?void 0:null===(n=t.values)||void 0===n?void 0:n.kode_sales,customerform:(null===(r=a.form)||void 0===r?void 0:r.ModalDataCustomer)||!1,jenis_pelanggan:null===(o=a.form)||void 0===o?void 0:null===(s=o.ModalDataCustomer)||void 0===s?void 0:null===(i=s.values)||void 0===i?void 0:i.jenis_pelanggan,kode_customer:null===(l=a.form)||void 0===l?void 0:null===(c=l.ModalDataCustomer)||void 0===c?void 0:null===(m=c.values)||void 0===m?void 0:m.kode_customer,nama_customer:null===(d=a.form)||void 0===d?void 0:null===(p=d.ModalDataCustomer)||void 0===p?void 0:null===(u=p.values)||void 0===u?void 0:u.nama_customer,no_hp:null===(g=a.form)||void 0===g?void 0:null===(h=g.ModalDataCustomer)||void 0===h?void 0:null===(b=h.values)||void 0===b?void 0:b.no_hp,alamat_customer:null===(_=a.form)||void 0===_?void 0:null===(f=_.ModalDataCustomer)||void 0===f?void 0:null===(k=f.values)||void 0===k?void 0:k.alamat_customer}},null)(z)},668:function(a,e,t){"use strict";e.a=function(a){var e={};return a.kode_sales||(e.kode_sales="Kode Sales Harus Dipilih"),a.nama_customer||(e.nama_customer="Nama Customer Harus Diisi"),a.no_hp||(e.no_hp="No Hp Harus Diisi"),a.alamat||(e.alamat="Alamat Harus Diisi"),e}}}]);
//# sourceMappingURL=29.49b9bf3e.chunk.js.map
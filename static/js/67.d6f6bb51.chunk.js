(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1156:function(a,t,e){"use strict";e.r(t);var n=e(19),i=e(20),l=e(50),s=e(22),o=e(21),c=e(0),r=e.n(c),u=e(38),d=e(42),g=e(52),m=e(288),h=e(73),f=e(43),p=e(75),b=e(13),_=e(11),v=e(90),S=function(a){Object(s.a)(e,a);var t=Object(o.a)(e);function e(a){var i;return Object(n.a)(this,e),(i=t.call(this,a)).state={isLoading:!1,DataValidasi:[],kode_sales:!1},i}return Object(i.a)(e,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(_.ub)()),this.getDetaValidasi()}},{key:"getDataSales",value:function(a){var t=this;this.setState({kode_sales:a}),Object(b.c)("sales/get/by-kode-sales/").then(function(a){t.props.change("nama_sales",a.data.nama_sales)}).catch(function(a){Object(f.e)("info","Gagal Mengambil Data Keserver")})}},{key:"getDetaValidasi",value:function(){var a=this;this.setState({isLoading:!0});var t={kode_sales:"all"};if(!1===t.kode_sales)return this.setState({isLoading:!1}),Object(f.e)("info","Kode Sales Harus Di pilih"),this.setState({isLoading:!1}),!1;Object(b.h)("validasi/get/hutang",t).then(function(t){0===t.data[0].hutang.length?(Object(f.e)("info","Belum Ada Data Validasi"),a.setState({isLoading:!1})):(Object(f.e)("success","Data Validasi Tersedia"),a.setState({isLoading:!1}),a.props.dispatch(Object(h.j)(t.data[0].hutang)))}).catch(function(t){Object(f.e)("info","Terjadi Kesalahan Saat Request"),a.setState({isLoading:!1,DataValidasi:[]})})}},{key:"render",value:function(){var a={mode:"checkbox",clickToSelect:!0,selectColumnPosition:"left",onSelect:function(a,t,e,n){if(!0===t){var i={no_faktur_hutang:a.no_faktur_hutang},l=JSON.parse(localStorage.getItem("validas_hutang"))||[];-1===l.findIndex(function(t){return t.no_faktur_hutang===a.no_faktur_hutang})&&(l.push(i),localStorage.setItem("validas_hutang",JSON.stringify(l)))}else if(null===localStorage.getItem("validas_hutang"));else{var s=JSON.parse(localStorage.getItem("validas_hutang"));s.splice(a.no_faktur_hutang,1),localStorage.setItem("validas_hutang",JSON.stringify(s))}},onSelectAll:function(a,t,e){t.forEach(function(t,e){if(!0===a){var n={no_faktur_hutang:t.no_faktur_hutang},i=JSON.parse(localStorage.getItem("validas_hutang"))||[];-1===i.findIndex(function(a){return a.no_faktur_hutang===t.no_faktur_hutang})&&(i.push(n),localStorage.setItem("validas_hutang",JSON.stringify(i)))}else if(null===localStorage.getItem("validas_hutang"));else{var l=JSON.parse(localStorage.getItem("validas_hutang"));l.splice(t.no_faktur_hutang,1),localStorage.setItem("validas_hutang",JSON.stringify(l))}})}};return r.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(v.a,{selectRow:a,keyField:"no_faktur_hutang",columns:this.props.columns,data:this.props.getValidasiHutang||[],empty:!0})),r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Validasi"):"Validasi")),r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{className:"btn btn-warning btn-block",disabled:this.props.isLoadingBatal,onClick:this.props.btnClear,type:"button"},this.props.isLoadingBatal?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal"))))}}]),e}(c.Component);S=Object(m.a)({form:"HeadValidasiHutang",enableReinitialize:!0})(S);var O=Object(u.b)(function(a){return{DataSales:a.datamaster.getDataSales,getValidasiHutang:a.hutang.getDataValidasiHutang}})(S),k=function(a){Object(s.a)(e,a);var t=Object(o.a)(e);function e(a){var i;return Object(n.a)(this,e),(i=t.call(this,a)).state={isLoading:!1,isLoadingBatal:!1,columns:[{dataField:"no_faktur_hutang",text:"No Faktur Hutang "},{dataField:"nama_customer",text:"Nama Customer "},{dataField:"jumlah_hutang",text:"Jumlah Hutang ",formatter:function(a){return r.a.createElement("span",null,parseFloat(a).toLocaleString("kr-KO"))}},{dataField:"no_hp",text:"No Hp "},{dataField:"alamat_customer",text:"Alamat "}]},i.handleSubmit=i.handleSubmit.bind(Object(l.a)(i)),i}return Object(i.a)(e,[{key:"handleSubmit",value:function(a){var t=this;if(null===localStorage.getItem("validas_hutang")||0===JSON.parse(localStorage.getItem("validas_hutang")).length)Object(f.e)("info","No Faktur Hutang Belum Dipilih"),this.setState({isLoading:!1});else{var e={hutang:JSON.parse(localStorage.getItem("validas_hutang")||[])};this.setState({isLoading:!0}),Object(b.h)("validasi/simpan/hutang",e).then(function(a){t.setState({isLoading:!1});for(var e=[],n=0;n<2;n++){var i="";a.data.notahutang.forEach(function(a,t){var e=a.n_alamat_customer.length;i+="========================================\n",i+="              NOTA HUTANG               \n",i+="========================================\nTanggal          : ".concat(a.tgl_system,"\nKode Sales       : ").concat(a.kode_sales,"\nNama Customer    : ").concat(a.nama_customer,"\nNo Hp            : ").concat(a.no_hp,"\nAlamat Customer  : ").concat(a.n_alamat_customer.slice(0,20),"\nNo Faktur Hutang : ").concat(a.no_faktur_hutang.toLocaleString("kr-KO"),"\n"),e>20&&(i+="                   ".concat(a.n_alamat_customer.slice(0,20),"\n")),e>40&&(i+="                   ".concat(a.n_alamat_customer.slice(40,20),"\n")),i+="========================================\n",i+="Keterangan\n",i+="========================================\n",a.detail_barang.forEach(function(a,t){i+="Nama Barang      : ".concat(a.nama_barang,"\n"),i+="Kondisi          : ".concat(a.kondisi,"\n"),i+="Kategori         : ".concat(a.kategori,"\n"),i+="Jumlah           : ".concat(a.jumlah,"\n"),i+="Berat            : ".concat(a.berat.toFixed(3),"\n"),i+="========================================\n"}),i+="Berat            : ".concat(a.berat.toFixed(3),"\n"),i+="Bunga            : ".concat(a.bunga.toFixed(3),"\n"),i+="Jumlah Hutang    : ".concat(a.jumlah_hutang.toLocaleString("kr-KO"),"\n"),i+="========================================\n",i+="                               TTD      \n",i+="                                        \n",i+="                                        \n",i+="                                        \n",i+="                         (             )\n",i+="                                        \n",i+="                                        \n",i+="                                        \n"}),e.push(i)}document.getElementById("myInput").value=e.join(""),setTimeout(function(){var a=document.createElement("a"),t=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(t),a.download="autoprint_hutang.txt",document.body.appendChild(a),a.click()},300),Object(f.e)("success","Hutang Berhasil Di Validasi"),localStorage.removeItem("validas_hutang"),t.props.dispatch(Object(g.e)("HeadValidasiHutang")),t.props.dispatch(Object(h.j)([]))}).catch(function(a){t.setState({isLoading:!1}),Object(f.e)("info","Gagal Mengambil Data Keserver")})}}},{key:"clearHutang",value:function(){var a=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){a.setState({isLoadingBatal:!1}),localStorage.removeItem("validas_hutang"),a.props.dispatch(Object(g.e)("HeadValidasiHutang")),a.props.dispatch(Object(h.j)([]))},1e3)}},{key:"render",value:function(){var a=this;return r.a.createElement("div",null,r.a.createElement("ol",{className:"breadcrumb float-xl-right"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(d.b,{to:"#"},"Kasir")),r.a.createElement("li",{className:"breadcrumb-item active"},"Validasi Hutang")),r.a.createElement("h1",{className:"page-header"},"Validasi Hutang "),r.a.createElement(p.a,null,r.a.createElement("textarea",{style:{display:"none"},id:"myInput",rows:"100",cols:"100"}),r.a.createElement(p.c,null,"Validasi Hutang"),r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(O,{columns:this.state.columns,isLoading:this.state.isLoading,isLoadingBatal:this.state.isLoadingBatal,btnClear:function(){return a.clearHutang()},onSubmit:function(t){return a.handleSubmit(t)}})),r.a.createElement("div",{className:"col-12"}))),r.a.createElement("br",null)))}}]),e}(r.a.Component);k=Object(m.a)({form:"FormValidasiHutang",enableReinitialize:!0})(k);t.default=Object(u.b)()(k)}}]);
//# sourceMappingURL=67.d6f6bb51.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1169:function(e,a,t){"use strict";t.r(a);var n=t(19),i=t(20),r=t(50),o=t(22),s=t(21),l=t(0),c=t.n(l),m=t(42),d=t(75),u=t(84),g=t.n(u),p=t(85),b=t.n(p),h=t(11),f=t(23),k=t(38),E=t(93),_=t.n(E),B=t(638),v=t(636),S=t(637),O=t(734),N=t(287),j=t(288),T=t(24),y=function(e){Object(o.a)(t,e);var a=Object(s.a)(t);function t(e){var i;return Object(n.a)(this,t),(i=a.call(this,e)).state={no_kirim:[],datagudang:[],databaki:[],loading:!1},i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(h.nb)()),this.props.dispatch(Object(h.lb)())}},{key:"render",value:function(){var e=this;return c.a.createElement(B.a,{backdrop:"static",keyboard:!1,isOpen:this.props.isOpen,toggle:function(){return e.props.dispatch(Object(h.Cb)())}},c.a.createElement(v.a,null," ",this.props.title," "),c.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}},c.a.createElement(S.a,null,c.a.createElement("div",{className:"form-group"},c.a.createElement(N.a,{label:"No Kirim",name:"no_kirim",options:this.props.no_kirim.map(function(e){return{value:e._id.no_kirim,name:e._id.no_kirim}}),placeholder:"Silahkan Pilih No Kirim",component:T.f})),c.a.createElement("div",{className:"form-group"},this.state.datagudang!==[]?c.a.createElement(N.a,{label:"Kode Gudang",name:"kode_gudang",onChange:function(a){e.setState({kode_gudang:a}),e.props.change("kode_baki","")},options:this.props.datagudang.filter(function(e){return void 0!==e.kode_gudang}).map(function(e){return{value:e.kode_gudang,name:e.kode_gudang+" - "+e.nama_gudang}}),placeholder:"Silahkan Pilih Kode Gudang",component:T.f}):c.a.createElement(_.a,{width:"100%",height:50})),c.a.createElement("div",{className:"form-group"},c.a.createElement(N.a,{label:"Kode Baki",name:"kode_baki",options:this.props.databaki.filter(function(a){return a.kode_gudang===e.state.kode_gudang}).map(function(e){return{value:e.kode_baki,name:e.kode_baki+" - "+e.nama_baki}||[]}),placeholder:"Silahkan Pilih Kode Baki",component:T.f}))),c.a.createElement(O.a,null,c.a.createElement("button",{className:"btn btn-primary",disabled:this.props.submitting,type:"submit"},this.props.isLoading?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Cek Data Barang"):"Cek Data Barang"),c.a.createElement("button",{className:"btn btn-white",onClick:function(){return e.props.dispatch(Object(h.Cb)())},type:"button",disabled:this.props.isLoading},"Batal"))))}}]),t}(l.Component);y=Object(j.a)({form:"FormTerimaBarang",enableReinitialize:!0})(y);var D=Object(k.b)(function(e){return{initialValues:{no_kirim:(null===localStorage.getItem("data_terima_barang")?[]:JSON.parse(localStorage.getItem("data_terima_barang")||[])).no_kirim||""},datagudang:e.datamaster.getDataGudang,databaki:e.datamaster.getDataBaki}},null)(y),F=t(13),x=t(43),C=t(52),w=t(28),L=p.Search.SearchBar,K=function(e){Object(o.a)(t,e);var a=Object(s.a)(t);function t(e){var i;return Object(n.a)(this,t),(i=a.call(this,e)).state={isEdit:!1,modalDialog:!1,isLoading:!1,isLoadingBtn:!1,DataTerimaBarang:[],SimpanDataBarang:!1,resetTerimaBarang:!1,columns:[{dataField:"no",text:"No ",formatter:function(e,a,t,n){return i.setState({num:1+t}),c.a.createElement("div",null," ",++t," ")},footerAttrs:{colSpan:"4"},footer:function(e,a,t,n){return c.a.createElement("div",null,"Total Barang : ",i.state.DataTerimaBarang.length," ")}},{dataField:"kode_barang",text:"Kode Barang",sort:!0},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_intern",text:"Kode Intern"},{dataField:"berat",text:"Berat",formatter:function(e){return e.toFixed(3)},footer:function(e){return e.reduce(function(e,a){return e+a},0).toFixed(3)}},{dataField:"nama_atribut",text:"Nama Atribut",footer:""},{dataField:"berat_atribut",text:"Berat Atribut",formatter:function(e){return e.toFixed(3)},footer:function(e){return e.reduce(function(e,a){return e+a},0).toFixed(3)}}]},i.handleSubmit=i.handleSubmit.bind(Object(r.a)(i)),i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(f.o)()),this.context.handleSetPageSidebar(!1),this.context.handleSetPageHeader(!1)}},{key:"resetTerimaBarang",value:function(){var e=this;this.setState({resetTerimaBarang:!0}),setTimeout(function(){e.setState({DataTerimaBarang:[],resetTerimaBarang:!1})},300)}},{key:"handleSubmit",value:function(e){var a=this,t={no_kirim:e.no_kirim,kode_gudang:e.kode_gudang,kode_toko:e.kode_baki};localStorage.setItem("data_terima_barang",JSON.stringify(t)),this.setState({SimpanDataBarang:t}),this.setState({isLoading:!0});var n={no_kirim:e.no_kirim};Object(F.c)("kirimbarang/get/nokirim/"+e.no_kirim,n).then(function(e){a.setState({DataTerimaBarang:e.data})}).then(function(){a.setState({isLoading:!1})}).then(function(){a.props.dispatch(Object(C.e)("FormTerimaBarang"))}).then(function(){a.props.dispatch(Object(h.Cb)())})}},{key:"formEditBaki",value:function(e){this.props.dispatch(Object(h.Db)()),this.props.dispatch(Object(f.m)(e)),this.setState({isEdit:!0})}},{key:"ShowModalTerimaBarang",value:function(){this.props.dispatch(Object(h.Db)()),this.props.dispatch(Object(f.m)(!1)),this.setState({isEdit:!1})}},{key:"terimabangOnline",value:function(){var e=this;this.setState({isLoadingBtn:!0}),Object(F.h)("terimabarang/add",this.state.SimpanDataBarang).then(function(){e.setState({DataTerimaBarang:[]})}).then(function(){e.props.dispatch(Object(C.e)("FormTerimaBarang")),localStorage.setItem("data_terima_barang",JSON.stringify([]))}).then(function(){e.props.dispatch(Object(f.o)())}).then(function(){e.setState({isLoadingBtn:!1})}).then(function(){Object(x.d)("Barang Berhasil Diterima")}).catch(function(a){return e.errorHandling(a)})}},{key:"errorHandling",value:function(e){Object(x.a)(e),this.setState({isLoadingBtn:!1})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(m.b,{to:"/home"},c.a.createElement("button",{type:"button",className:"btn btn-secondary","data-tut":"reactour_4"},c.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," Home")),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(d.a,null,c.a.createElement(d.c,null,"Terima Barang"),c.a.createElement("br",null),c.a.createElement("div",{className:"container"},!1===this.state.isLoading?c.a.createElement(b.a,{keyField:"kode_barang",data:this.state.DataTerimaBarang||[],columns:this.state.columns,search:!0,exportCSV:{fileName:"Export Terima Barang.csv"}},function(a){return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-6"},c.a.createElement("button",{onClick:function(){return e.ShowModalTerimaBarang()},className:"btn btn-teal"}," ",c.a.createElement("i",{className:"fa fa-plus"})," ")),c.a.createElement("div",{className:"col-6"},c.a.createElement("div",{className:"text-right"},c.a.createElement(L,a.searchProps))),c.a.createElement("hr",null),c.a.createElement("div",{className:"col-12"},c.a.createElement(g.a,a.baseProps),c.a.createElement("br",null),c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.terimabangOnline()}},e.state.isLoadingBtn?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Terima Barang"):"Terima Barang"),"\xa0",c.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.resetTerimaBarang()}},e.state.resetTerimaBarang?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Reset"):"Reset"))))}):c.a.createElement(_.a,{width:"100%",height:200}),c.a.createElement(D,{no_kirim:this.props.Nokirim,isLoading:this.state.isLoading,isEdit:this.state.isEdit,title:(this.state.isEdit,"Terima Barang"),isOpen:this.props.hideModal,onSubmit:function(a){return e.handleSubmit(a)}})),c.a.createElement("br",null)))}}]),t}(c.a.Component);K.contextType=w.a;a.default=Object(k.b)(function(e){return{Nokirim:e.databarang.getNokirim,hideModal:e.datamaster.modalDialog}},null)(K)},734:function(e,a,t){"use strict";var n=t(16),i=t(26),r=t(0),o=t.n(r),s=t(4),l=t.n(s),c=t(32),m=t.n(c),d=t(18),u={tag:d.m,className:l.a.string,cssModule:l.a.object},g=function(e){var a=e.className,t=e.cssModule,r=e.tag,s=Object(i.a)(e,["className","cssModule","tag"]),l=Object(d.i)(m()(a,"modal-footer"),t);return o.a.createElement(r,Object(n.a)({},s,{className:l}))};g.propTypes=u,g.defaultProps={tag:"div"},a.a=g}}]);
//# sourceMappingURL=39.b985c12c.chunk.js.map
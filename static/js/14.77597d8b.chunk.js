(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1141:function(e,a,t){"use strict";t.r(a);var n=t(19),r=t(20),o=t(50),l=t(22),i=t(21),c=t(0),s=t.n(c),u=t(38),m=t(42),d=t(285),b=t(7),p=t(43),g=t(90),f=t(75),h=t(13),_=t(287),k=t(288),E=t(24),v=t(665),y=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={date:new Date("Y-m-d"),columns:[{dataField:"nama_barang",text:"Nama Barang",footer:""},{dataField:"berat",text:"Berat",formatter:function(e){return s.a.createElement("span",null,parseFloat(e).toFixed(1))},footer:function(e){return parseFloat(e.reduce(function(e,a){return e+a},0)).toFixed(1)}},{dataField:"berat_nota",text:"Berat Nota",formatter:function(e){return s.a.createElement("span",null,parseFloat(e).toFixed(1))},footer:function(e){return parseFloat(e.reduce(function(e,a){return e+a},0)).toFixed(1)}},{dataField:"harga_nota",text:"Harga Nota",formatter:function(e){return s.a.createElement("span",null,parseInt(e).toLocaleString("kr-KO"))},footer:function(e){return parseInt(e.reduce(function(e,a){return e+a},0)).toLocaleString("kr-KO")}},{dataField:"harga",text:"Harga",formatter:function(e){return s.a.createElement("span",null,parseInt(e).toLocaleString("kr-KO"))},footer:function(e){return parseInt(e.reduce(function(e,a){return e+a},0)).toLocaleString("kr-KO")}},{dataField:"harga_rata",text:"Harga Rata",formatter:function(e){return s.a.createElement("span",null,parseInt(e).toLocaleString("kr-KO"))},footer:function(e){return parseInt(e.reduce(function(e,a){return e+a},0)).toLocaleString("kr-KO")}},{dataField:"kondisi",text:"Kondisi",footer:""}]},r}return Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4"},s.a.createElement(_.a,{id:"no_faktur_group",name:"no_faktur_group",component:E.b,type:"hidden",readOnly:!0}),s.a.createElement(_.a,{name:"nama_customer",component:E.e,type:"text",readOnly:!0,label:"Nama Customer",placeholder:"Masukan Nama Customer"})),s.a.createElement("div",{className:"col-4"},s.a.createElement(_.a,{name:"no_hp",component:E.e,type:"text",readOnly:!0,label:"No Hp",placeholder:"Masukan No Hp"})),s.a.createElement("div",{className:"col-4"},s.a.createElement(_.a,{name:"alamat_customer",component:E.e,type:"text",readOnly:!0,label:"Alamat Customer",placeholder:"Masukan Alamat Customer"})),s.a.createElement("div",{className:"col-12"},s.a.createElement(g.a,{keyField:"nama_barang",exportCsv:!1,data:this.props.detail_barang,columns:this.state.columns,pagination:"off",empty:!0,textEmpty:"Data Barang Kosong"})),s.a.createElement("div",{className:"col-3"},s.a.createElement("button",{type:"button",onClick:this.props.back,className:"btn btn-primary btn-block"},s.a.createElement("i",{className:"fa fa-arrow-left"})," Kembali")),s.a.createElement("div",{className:"col-9"},s.a.createElement("button",{tabIndex:"2",className:"btn btn-primary btn-block",disabled:this.props.isLoadingBatalBeli,type:"submit"},this.props.isLoadingBatalBeli?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Membatal"):"Batal Pembelian"))),s.a.createElement("br",null))}}]),t}(c.Component);y=Object(k.a)({form:"HeadBatalBeli",enableReinitialize:!0,validate:v.a})(y);var O=Object(u.b)(function(e){return{detail_barang:e.pembelian.showModalBatalBeli.detail_barang,initialValues:{no_faktur_group:e.pembelian.showModalBatalBeli.no_faktur_group,nama_customer:e.pembelian.showModalBatalBeli.nama_customer,no_hp:e.pembelian.showModalBatalBeli.no_hp,alamat_customer:e.pembelian.showModalBatalBeli.alamat_customer}}})(y),S=t(660),B=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={isLoading:!1,isLoadingBatal:!1,FormModal:""},r.setStartDate=r.setStartDate.bind(Object(o.a)(r)),r.setLastDate=r.setLastDate.bind(Object(o.a)(r)),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"setStartDate",value:function(e){this.setState({tgl_awal:new Date(e)})}},{key:"setLastDate",value:function(e){this.setState({tgl_akhir:new Date(e)})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-4"},s.a.createElement(_.a,{name:"tgl_awal",component:E.c,label:"Tanggal Dari",type:"text",selected:this.state.tgl_awal,onChange:function(a){return e.setStartDate(a)},placeholder:"Masukan Tanggal Dari",onFocus:function(){return setTimeout(function(){HideKeyboard.postMessage("")},100)}})),s.a.createElement("div",{className:"col-lg-4"},s.a.createElement(_.a,{name:"tgl_akhir",component:E.c,type:"text",selected:this.state.tgl_akhir,onChange:function(a){return e.setLastDate(a)},label:"Tanggal Akhir",placeholder:"Masukan Tanggal Akhir",onFocus:function(){return setTimeout(function(){HideKeyboard.postMessage("")},100)}})),s.a.createElement("div",{className:"col-4"},s.a.createElement("label",null," \xa0"),s.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Pembelian"))))}}]),t}(c.Component);B=Object(k.a)({form:"HeadPembelian",enableReinitialize:!0,validate:S.a})(B);var L=Object(u.b)(function(e){return{initialValues:{tgl_awal:Object(b.h)(),tgl_akhir:Object(b.h)()}}})(B),F=t(103),N=t(28),j=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={isLoadingServicesSelesai:!1,isLoadingBatalBeli:!1,isLoading:!1,dataservices:[],FormModal:!1,pembayaran:!1,columns:[{dataField:"no_faktur_beli",text:"No FB",footerAttrs:{colSpan:"3"},footer:"Total"},{dataField:"nama_customer",text:"Nama Customer"},{dataField:"no_hp",text:"No Hp"},{dataField:"harga",text:"Harga",formatter:function(e){return s.a.createElement("span",null,parseInt(e).toLocaleString("kr-KO"))},footer:function(e){return parseInt(e.reduce(function(e,a){return e+a},0)).toLocaleString("kr-KO")}},{dataField:"harga_nota",text:"Harga Nota",formatter:function(e){return s.a.createElement("span",null,parseInt(e).toLocaleString("kr-KO"))},footer:function(e){return parseInt(e.reduce(function(e,a){return e+a},0)).toLocaleString("kr-KO")}},{dataField:"harga_rata",text:"Harga Rata",formatter:function(e){return s.a.createElement("span",null,parseInt(e).toLocaleString("kr-KO"))},footer:function(e){return parseInt(e.reduce(function(e,a){return e+a},0)).toLocaleString("kr-KO")}},{dataField:"kondisi",text:"Kondisi",footer:""},{dataField:"ambil",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(e,a,t){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement("button",{type:"button","data-tooltip":"Batal Pembelian",onClick:function(){return r.shoBatalPembelian(a)},className:"btn btn-danger"},s.a.createElement("i",{className:"fa fa-file-export"})),"\xa0",s.a.createElement("button",{"data-tooltip":"Reprint Pembelian",type:"button",onClick:function(){return r.ReprintPembelian(a)},className:"btn btn-success mr-3"},s.a.createElement("i",{className:"fa fa-print"}))))},footer:""}]},r.handleSubmit=r.handleSubmit.bind(Object(o.a)(r)),r}return Object(r.a)(t,[{key:"ReprintPembelian",value:function(e){var a={no_faktur_group:e.no_faktur_group};Object(h.h)("pembelian/get/bynota",a).then(function(e){var a="";e.data.notabeli.forEach(function(e,t){var n=e.head.n_alamat_customer.length;a="========================================\n      Tanggal          : ".concat(e.head.tgl_system,"\n      Nama Customer    : ").concat(e.head.nama_customer,"\n      No Hp            : ").concat(e.head.no_hp,"\n      Alamat Customer  : ").concat(e.head.n_alamat_customer.split(0,20),"\n      "),n>20&&(a+="                   ".concat(e.head.n_alamat_customer.split(0,20),"\n      ")),n>40&&(a+="                   ".concat(e.head.n_alamat_customer.split(40,20),"\n      ")),a+="========================================\n",a+="Keterangan\n",a+="========================================\n";var r=0,o=0;e.detail.forEach(function(e,t){r+=e.harga,o+=e.harga_nota,a+="No Faktur Beli : ".concat(e.no_faktur_beli,"\n"),a+="Jenis Barang   : ".concat(e.kode_dept,"\n"),a+="Nama Barang    : ".concat(e.nama_barang,"\n"),a+="Berat          : ".concat(e.berat.toFixed(3),"\n"),a+="Harga          : ".concat(e.harga.toLocaleString("kr-KO"),"\n"),a+="========================================\n"}),a+="Total          : ".concat(r.toLocaleString("kr-KO"),"\n"),a+="========================================\n",a+="Harga Waktu Beli   : ".concat(r.toLocaleString("kr-KO"),"\n"),a+="Harga Waktu Jual   : ".concat(o.toLocaleString("kr-KO"),"\n"),a+="\n\n\n\n\n\n\n      "}),document.getElementById("myInput").value=a}).then(function(){console.log("masuk");var e=document.createElement("a"),a=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});e.href=URL.createObjectURL(a),e.download="autoprint_pembelian.txt",document.body.appendChild(e),e.click()}).catch(function(e){})}},{key:"shoBatalPembelian",value:function(e){var a=this,t={no_faktur_group:e.no_faktur_group};Object(h.h)("batalpembelian/get/by-faktur",t).then(function(e){0===e.data.length?(Object(p.e)("info",e.data.message),a.setState({FormModal:!1})):(a.setState({FormModal:!0}),e.data.forEach(function(e,t){var n={no_faktur_group:e._id.no_faktur_group,tgl_system:e._id.tgl_system,kode_sales:e._id.kode_sales,nama_customer:e._id.nama_customer,no_hp:e._id.no_hp,alamat_customer:e._id.alamat_customer,kode_gudang:e._id.kode_gudang,detail_barang:e.detail_barang};a.props.dispatch(Object(d.b)(n))}))}).catch(function(e){console.log(e),Object(p.e)("info","Terjadi Kesalahan Saat Request Data"),a.setState({FormModal:!1})})}},{key:"handleSubmit",value:function(e){var a=this,t={tgl_awal:Object(b.e)(F(new Date(e.tgl_awal)).format("YYYY-MM-DD")),tgl_akhir:Object(b.e)(F(new Date(e.tgl_akhir)).format("YYYY-MM-DD"))};Object(b.m)("tgl_laporan",JSON.stringify(t)),this.setState({isLoading:!0}),Object(h.h)("pembelian/get/by-tanggal",t).then(function(e){0===e.data.length?(Object(p.e)("info","Data Pembelian Tidak Ada"),a.setState({isLoading:!1,datapembelian:[]})):(Object(p.e)("success","Data Pembelian Tersedia"),a.setState({isLoading:!1,datapembelian:e.data}))}).catch(function(e){Object(p.e)("info","Data Pembelian Tidak Ada"),a.setState({isLoading:!1,datapembelian:[]})})}},{key:"batalPembelian",value:function(e){var a=this;this.setState({isLoadingBatalBeli:!0}),setTimeout(function(){var t={no_faktur_group:e.no_faktur_group};Object(h.h)("batalpembelian/simpan",t).then(function(e){Object(p.e)("success",e.data.message),a.setState({FormModal:!1,isLoadingBatalBeli:!1});var t=0===Object(b.l)("tgl_laporan").length?[]:JSON.parse(Object(b.l)("tgl_laporan"));Object(h.h)("pembelian/get/by-tanggal",t).then(function(e){a.setState({datapembelian:e.data})})}).catch(function(e){Object(p.e)("info","Data Pembelian Tidak Ada"),a.setState({FormModal:!1,isLoading:!1,isLoadingBatalBeli:!1})})},500)}},{key:"back",value:function(){this.setState({FormModal:!1})}},{key:"componentDidMount",value:function(){this.context.handleSetPageSidebar(!1),this.context.handleSetPageHeader(!1)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(m.b,{to:"/SubMenuPembelian"},s.a.createElement("button",{type:"button",className:"btn btn-secondary","data-tut":"reactour_4"},s.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," Home")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(f.a,null,s.a.createElement("textarea",{style:{display:"none"},id:"myInput",rows:"100",cols:"100"}),s.a.createElement(f.c,null," ",!0===this.state.FormModal?"Batal Pembelian":"Lihat Pembelian"),s.a.createElement("br",null),s.a.createElement("div",{className:"container"},!0===this.state.FormModal?s.a.createElement(O,{back:function(){return e.back()},isLoadingBatalBeli:this.state.isLoadingBatalBeli,onSubmit:function(a){return e.batalPembelian(a)}}):s.a.createElement(s.a.Fragment,null,s.a.createElement(L,{onSubmit:function(a){return e.handleSubmit(a)},isLoading:this.state.isLoading}),s.a.createElement(g.a,{keyField:"no_faktur_group",exportCsv:!1,data:this.state.datapembelian,columns:this.state.columns,empty:!0,textEmpty:"Data Barang Kosong"}))),s.a.createElement("br",null)))}}]),t}(s.a.Component);j.contextType=N.a;a.default=Object(u.b)(null)(j)},660:function(e,a,t){"use strict";a.a=function(e){var a={};return e.user_id||(a.user_id="User Id Tidak Boleh Kosong"),e.user_name||(a.user_name="Username Tidak Boleh Kosong"),e.level||(a.level="Level Harus Dipilih "),a}},665:function(e,a,t){"use strict";a.a=function(e){var a={};return e.tgl_selesai||(a.tgl_selesai="Tanggal Selesai Tidak Boleh Kosong"),e.tgl_ambil||(a.tgl_ambil="Tanggal Tidak Boleh Kosong"),a}}}]);
//# sourceMappingURL=14.77597d8b.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1174:function(a,e,t){"use strict";t.r(e);var n=t(19),r=t(20),i=t(50),o=t(22),c=t(21),l=t(0),d=t.n(l),s=t(42),m=t(75),b=t(38),g=t(90),u=t(13),h=t(43),p=t(23),f=t(11),k=t(27),E=t.n(k),O=t(44),v=t(138),_=t.n(v),j=t(287),N=t(288),S=t(76),y=t(24),B=t(7),D=t(96),w=t.n(D),K=Object(S.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),T=function(a){Object(o.a)(t,a);var e=Object(c.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).tgl_awalChange=function(a){r.setState({tgl_awal:a})},r.tgl_akhirChange=function(a){r.setState({tgl_akhir:a})},r.getValue=function(){var a=Object(O.a)(E.a.mark(function a(e){var t,n;return E.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.target.files[0],a.next=4,Object(B.o)(t);case 4:n=a.sent,r.props.dispatch(Object(p.s)(n)),r.props.change("foto",n),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(0);case 11:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e){return a.apply(this,arguments)}}(),r.state={visible:!0,ModalWebCam:!1,isLoadingBaki:!1,isLoadingJenis:!1,tgl_awal:new Date,tgl_akhir:new Date,databaki:[],DataGroup:[],DataJenis:[],loadimage:w.a},r}return Object(r.a)(t,[{key:"showModalWebcam",value:function(){this.props.dispatch(Object(p.s)(!1)),this.props.dispatch(Object(f.Db)()),this.setState({ModalWebCam:!0})}},{key:"handleTakePhoto",value:function(){var a=Object(O.a)(E.a.mark(function a(e){var t,n;return E.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=Object(B.c)(e),a.next=4,Object(B.o)(t);case 4:n=a.sent,console.log(n),this.props.dispatch(Object(p.s)(n)),this.props.change("foto",n),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}},a,this,[[0,10]])}));return function(e){return a.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var a=this;Object(u.c)("group/get/all").then(function(e){a.setState({DataGroup:e.data})}).catch(function(a){console.log(a)})}},{key:"getJenis",value:function(a){var e=this;this.setState({isLoadingJenis:!0}),Object(u.c)("jenis/get/by-kode-kategori/"+a).then(function(a){e.setState({DataJenis:a.data})}).then(function(a){e.setState({isLoadingJenis:!1})}).catch(function(a){Object(h.b)(a.data),console.log(a)})}},{key:"getBaki",value:function(a){var e=this;this.setState({isLoadingBaki:!0}),Object(u.c)("baki/get/by-kode-baki/"+a).then(function(a){e.setState({databaki:""===a.data?[]:[a.data]})}).then(function(a){e.setState({isLoadingBaki:!1})}).catch(function(a){Object(h.b)(a.data),console.log(a)})}},{key:"loadcamera",value:function(){var a=this;return d.a.createElement(_.a,{onTakePhoto:function(e){a.handleTakePhoto(e)}})}},{key:"render",value:function(){var a=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-8"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(j.a,{readOnly:!0,name:"foto",type:"hidden",component:y.b}),d.a.createElement(j.a,{readOnly:!0,name:"kode_barcode",component:y.e,label:"Kode Barcode",placeholder:"Masukan Kode Barcode"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(j.a,{name:"nama_barang",component:y.e,label:"Nama Barang",placeholder:"Masukan Nama Barang"}))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-8"},d.a.createElement(j.a,{name:"nama_atribut",component:y.e,label:"Nama Atribut",placeholder:"Masukan Nama Atribut"})),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement(j.a,Object.assign({name:"harga_atribut",component:y.e,label:"Harga Atribut"},K,{placeholder:"Masukan Harga Atribut"})))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(j.a,{name:"kadar",component:y.e,label:"Kadar",placeholder:"Masukan Kadar"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(j.a,{name:"kadar_cetak",component:y.e,label:"Kadar Cetak",placeholder:"Masukan Kadar Cetak"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(j.a,{name:"kode_intern",component:y.e,label:"Kode Intern",placeholder:"Masukan Kode Intern"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null," \xa0 "),!0===this.props.isLoading?d.a.createElement(B.d,{className:"btn btn-block btn-primary",text:"Sedang Menyimpan Data"}):d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary"},"Simpan Barang")))))),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-4"},!0===this.state.ModalWebCam&&!1===this.props.setCamera?d.a.createElement("div",{className:"container"},this.loadcamera()):d.a.createElement(d.a.Fragment,null,d.a.createElement("img",{src:void 0===this.props.foto?!1===this.props.setCamera?w.a:this.props.setCamera:this.props.setCamera?this.props.setCamera:this.props.foto,alt:"img",height:"245px",width:"355px"})))),d.a.createElement("div",{className:"row mt-2"},d.a.createElement("div",{className:"col-lg-12 mb-8"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-8"},d.a.createElement("div",{className:"input-group"},d.a.createElement("div",{className:"custom-file"},d.a.createElement("input",{type:"file",name:"photo",autoComplete:"off",className:"custom-file-input",id:"exampleInputFile",onChange:function(e){return a.getValue(e)}}),d.a.createElement("label",{className:"custom-file-label",htmlFor:"exampleInputFile"},"Pilih gambar")))),d.a.createElement("div",{className:"col-4"},d.a.createElement("button",{className:"btn btn-block btn-primary",type:"button",onClick:function(){return a.showModalWebcam()}}," ","WebCam"," ")))))))))}}]),t}(l.Component);T=Object(N.a)({form:"HeadEditDataBarang",enableReinitialize:!0})(T);var C=Object(b.b)(function(a){return{initialValues:{foto:a.databarang.showEditBarang.foto,kode_barcode:a.databarang.showEditBarang.kode_barcode,nama_barang:a.databarang.showEditBarang.nama_barang,nama_atribut:a.databarang.showEditBarang.nama_atribut,harga_atribut:a.databarang.showEditBarang.harga_atribut,kode_intern:a.databarang.showEditBarang.kode_intern,kadar:a.databarang.showEditBarang.kadar,kadar_cetak:a.databarang.showEditBarang.kadar_cetak},foto:a.databarang.showEditBarang.foto,setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}},null)(T),x=t(208),J=t(52),M=t(58),F=t.n(M),A=Object(l.lazy)(function(){return t.e(45).then(t.bind(null,1105))}),L=function(a){Object(o.a)(t,a);var e=Object(c.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isEdit:!1,modalDialog:!1,setfocus:!1,formEdit:!1,loadingData:!1,databarang:[]},r.handleSubmit=r.handleSubmit.bind(Object(i.a)(r)),r}return Object(r.a)(t,[{key:"getBarangKodeBaki",value:function(a){var e=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(B.m)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(u.c)("barang/get/by-kode-baki?limit=1000&kode_baki="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(B.m)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Baki Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(B.m)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(u.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(B.m)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Baki Yang Dicari Tidak Ada"))})},1500)}},{key:"showEditBarang",value:function(a){var e=this;Object(u.c)("imagebarang/get/by-kode-barcode/"+a.kode_barcode).then(function(t){var n={foto:t.data.dataimage,kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak};e.props.dispatch(Object(p.v)(n)),setTimeout(function(){e.props.dispatch(Object(f.Db)())},500)}).catch(function(t){var n={kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak};e.props.dispatch(Object(p.v)(n)),setTimeout(function(){e.props.dispatch(Object(f.Db)())},500)})}},{key:"getKodeBarcode",value:function(a){var e=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(B.m)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(u.c)("barang/open/kode-barcode?limit=1000&kode_barcode="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(B.m)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Barcode Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(B.m)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(u.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(B.m)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Barcode Yang Dicari Tidak Ada"))})},1500)}},{key:"getNamaBarang",value:function(a){var e=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(B.m)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(u.c)("barang/get/by-nama-barang?limit=1000&nama_barang="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(B.m)("databarangall",JSON.stringify([])),Object(h.e)("info","Nama Barang Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(B.m)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(u.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(B.m)("databarangall",JSON.stringify([])),Object(h.e)("info","Nama Barang Yang Dicari Tidak Ada"))})},1500)}},{key:"getByKodeGroup",value:function(a){var e=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(B.m)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(u.c)("barang/get/by-kode-group?limit=1000&kode_group="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(B.m)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Group Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(B.m)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(u.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(B.m)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Group Yang Dicari Tidak Ada"))})},1500)}},{key:"handleSubmit",value:function(a){var e=this;this.setState({isLoading:!0});var t={kode_barcode:a.kode_barcode,dataimage:a.foto},n={nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak};Object(u.h)("barang/edit/"+a.kode_barcode,n).then(function(){e.props.dispatch(Object(p.t)(!0)),e.props.dispatch(Object(f.Cb)())}).then(function(){void 0===a.foto||Object(u.h)("imagebarang/add",t).then(function(a){}).catch(function(a){console.log(a.response.data)})}).then(function(){e.setState({databarang:[]}),e.props.dispatch(Object(J.e)("HeadEditDataBarang")),e.props.dispatch(Object(p.s)(!1))}).then(function(){Object(h.e)("success","Data Berhasil Disimpan")}).then(function(){e.setState({isLoading:!1})}).catch(function(a){e.setState({isLoading:!1}),Object(h.e)("info","Barang Gagal Di Edit")})}},{key:"render",value:function(){var a=this,e=[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_group",text:"Kode Group"},{dataField:"kode_toko",text:"Kode Baki"},{dataField:"kode_dept",text:"Kode Jenis"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"berat",text:"Berat"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(e,t){return d.a.createElement("div",{className:"row text-center"},d.a.createElement("div",{className:"col-12"},d.a.createElement("button",{type:"button",onClick:function(){return a.showEditBarang(t)},className:"btn btn-primary mr-3"},d.a.createElement("i",{className:"fa fa-edit"}))))}}],t={renderer:function(a){return d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-12"},"Nama Atribut : ",a.nama_atribut," ",d.a.createElement("br",null),"Betat Atribut : ",a.berat_atribut," ",d.a.createElement("br",null),"Harga Atribut : ",a.harga_atribut," ",d.a.createElement("br",null),"Kode Intern : ",a.kode_intern," ",d.a.createElement("br",null),"Kadar : ",a.kadar," ",d.a.createElement("br",null),"Kadar Cetak : ",a.kadar_cetak," ",d.a.createElement("br",null),"Kode Toko : ",a.kode_toko," ",d.a.createElement("br",null),"Kode Gudang : ",a.kode_gudang," ",d.a.createElement("br",null),"Stock : ",a.stock_on_hand," ",d.a.createElement("br",null))))},showExpandColumn:!0,expandByColumnOnly:!0};return d.a.createElement("div",null,d.a.createElement("ol",{className:"breadcrumb float-xl-right"},d.a.createElement("li",{className:"breadcrumb-item"},d.a.createElement(s.b,{to:"#"},"Barang")),d.a.createElement("li",{className:"breadcrumb-item active"},"Data Barang")),d.a.createElement("h1",{className:"page-header"},"Data Barang "),d.a.createElement(m.a,null,d.a.createElement(m.c,null,"Filter Pencarian Barang"),d.a.createElement("br",null),d.a.createElement(m.b,null,d.a.createElement(A,{getKodeBarcode:function(e){return a.getKodeBarcode(e)},getNamaBarang:function(e){return a.getNamaBarang(e)},getByKodeGroup:function(e){return a.getByKodeGroup(e)},getBarangKodeBaki:function(e){return a.getBarangKodeBaki(e)}}))),d.a.createElement(m.a,null,d.a.createElement(m.c,null,this.state.loadingData?d.a.createElement(d.a.Fragment,null," ",d.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"," "):"Data Barang"),d.a.createElement("br",null),d.a.createElement(m.b,null,d.a.createElement(g.a,{keyField:"kode_barang",exportCsv:!0,data:this.state.databarang,columns:e,empty:!0,textEmpty:this.state.loadingData?d.a.createElement(d.a.Fragment,null," ",d.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"):"Data Barang Kosong",expandRow:t})),d.a.createElement("br",null),d.a.createElement(x.a,{title:"Edit Barang",content:d.a.createElement(C,{isLoading:this.state.isLoading,onSubmit:function(e){return a.handleSubmit(e)}})})),this.state.loadingData?d.a.createElement(F.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(d.a.Component);e.default=Object(b.b)(function(a){return{showEditBarang:a.databarang.showEditBarang,hideModal:a.datamaster.modalDialog}},null)(L)}}]);
//# sourceMappingURL=44.9847e5df.chunk.js.map
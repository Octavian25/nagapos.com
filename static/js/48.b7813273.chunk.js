(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1173:function(a,e,t){"use strict";t.r(e);var n=t(19),r=t(20),o=t(50),i=t(22),d=t(21),s=t(2),b=t(190),c=t(13),l=t(23),_=t(0),u=t.n(_),k=t(38),m=t(288),g=function(a){Object(i.a)(t,a);var e=Object(d.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){document.getElementById("nomor_pesanan").focus()},100)}},{key:"render",value:function(){var a=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:""},"Masukan Nomor Pesanan"),u.a.createElement("div",{className:"input-group mb-3"},u.a.createElement("input",{type:"text",id:"nomor_pesanan",className:"form-control",placeholder:"Nomor Pesanan","aria-label":"Nomor Pesanan","aria-describedby":"basic-addon2"}),u.a.createElement("div",{className:"input-group-append"},u.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return a.props.getNomorPesanan(document.getElementById("nomor_pesanan"))}},this.props.isLoadingPesanan?u.a.createElement(u.a.Fragment,null,u.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Search"):"Search"))))}}]),t}(_.Component);g=Object(m.a)({form:"ModalPesanan",enableReinitialize:!0})(g);var p=Object(k.b)(function(a){return{setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}},null)(g),h=Object(s.H)(function(){return t.e(47).then(t.bind(null,1104))}),f=function(a){Object(i.a)(t,a);var e=Object(d.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).showBarangPesanan=function(){r.setState({fromModalPesanan:!0,formTambahBarang:!1}),r.props.dispatch(Object(s.R)()),r.props.dispatch(Object(l.w)())},r.state={isEdit:!1,modalDialog:!1,isLoading:!1,formEdit:!1,loadingData:!1,databarang:[],dataPesanan:[],formTambahBarang:!1,fromModalPesanan:!1,isLoadingPesanan:!1,noPesanan:"",columns:[{dataField:"kode_barcode",text:"Kode Barcode",sort:!0},{dataField:"kode_group",text:"Kode Group"},{dataField:"kode_toko",text:"Kode Baki"},{dataField:"kode_dept",text:"Kode Jenis"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"berat",text:"Berat"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,e){return s.n.createElement("div",{className:"row text-center"},s.n.createElement("div",{className:"col-12"},s.n.createElement("button",{type:"button",onClick:function(){return r.showModalDuplikatBarang(e)},className:"btn btn-primary mr-3"},s.n.createElement("i",{className:"fa fa-copy"}))))}}]},r.handleSubmit=r.handleSubmit.bind(Object(o.a)(r)),r.showModalTambahBarang=r.showModalTambahBarang.bind(Object(o.a)(r)),r.tambahbarang=r.tambahbarang.bind(Object(o.a)(r)),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){localStorage.removeItem("estimasi_harga_tambah")}},{key:"tambahbarang",value:function(a){var e=this;this.setState({isLoading:!0});var t={id_barang_pesanan:"-",kode_group:a.kode_kategori,kode_dept:a.kode_jenis,kode_gudang:a.kode_gudang,kode_toko:a.kode_lokasi_toko,kode_intern:a.kode_intern||"-",nama_barang:a.nama_barang,berat:parseFloat(a.berat),berat_stock:void 0===a.berat_stock?0:a.berat_stock,berat_asli:"PESANAN"===a.status_pesanan?parseFloat(a.berat):parseFloat(a.berat_asli)||0,kadar_modal:parseFloat(a.kadar_modal)||0,kadar:parseFloat(a.kadar),kadar_cetak:a.kadar_cetak,nama_atribut:a.nama_atribut||"-",berat_atribut:parseFloat(a.berat_atribut)||0,berat_plastik:parseFloat(a.berat_plastik)||0,harga_atribut:parseInt(a.harga_atribut)||0,tag_id:"-",berat_bandrol:0,no_pesanan:a.no_pesanan||"-"};setTimeout(function(){Object(c.i)("tambah-barang/create",t).then(function(t){var n={kode_barcode:t.data.kode_barcode,dataimage:a.foto};void 0===a.foto||Object(s.L)("imagebarang/add",n).then(function(a){Object(s.t)("success","Data Barang Berhasil Di Tambahkan")}).catch(function(a){console.log(void 0===a.response?"Terjadi Kesalahan Saat Mengirim Data":a.response.data)}),Object(c.c)("barang/get/by-kode-baki?kode_baki="+a.kode_lokasi_toko).then(function(a){0===a.data.length?e.setState({databarang:[]}):e.setState({databarang:a.data}),e.setState({isLoading:!1})}).catch(function(a){e.setState({isLoading:!1,databarang:[]}),Object(s.t)("info","Kode Baki Yang Anda Dicari Tidak Ada")}),e.props.dispatch(Object(s.P)("FormTambahBarang")),e.props.dispatch(Object(s.F)()),Object(s.t)("success","Data Barang Berhasil Di Tambahkan")}).catch(function(a){var t,n;e.setState({isLoading:!1}),Object(s.t)("info",(null===(t=a.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)||"Gagal Tambah Barang Silahkan Coba Lagi")})},300)}},{key:"showModalDuplikatBarang",value:function(a){var e=this;Object(c.c)("imagebarang/get/by-kode-barcode/"+a.kode_barcode).then(function(t){var n={foto:t.data.dataimage,kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar||0,kadar_cetak:a.kadar_cetak||0,kadar_modal:a.kadar_modal||0,kode_kategori:a.kode_group,kode_jenis:a.kode_dept,kode_lokasi_toko:a.kode_toko+"~"+a.kode_gudang,berat:a.berat,berat_asli:a.berat_asli,berat_atribut:a.berat_atribut||0,berat_plastik:a.berat_plastik||0,tag_id:a.tag_id,berat_bandrol:0};console.log(n),Object(s.Q)("data_kategori_jenis",n),e.setState({formTambahBarang:!0}),e.props.dispatch(Object(s.R)()),e.props.dispatch(Object(b.f)(n))}).catch(function(t){var n={foto:"-",kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar||0,kadar_cetak:a.kadar_cetak||0,kadar_modal:a.kadar_modal||0,kode_kategori:a.kode_group,kode_jenis:a.kode_dept,kode_lokasi_toko:a.kode_toko+"~"+a.kode_gudang,berat:a.berat,berat_asli:a.berat_asli,berat_atribut:a.berat_atribut||0,berat_plastik:a.berat_plastik||0,tag_id:a.tag_id,berat_bandrol:0};Object(s.Q)("data_kategori_jenis",n),e.setState({formTambahBarang:!0}),e.props.dispatch(Object(s.R)()),e.props.dispatch(Object(b.f)(n))})}},{key:"showModalTambahBarang",value:function(a){var e=this;Object(s.D)("module").findIndex(function(a){return"true"===a.value})>=0?Object(c.k)("penerimaan-suplier/ready-input",{kode_dept:a.kode_jenis}).then(function(a){Object(s.Q)("saldo_supplier",a.data.saldo),e.props.dispatch(Object(s.R)()),e.setState({formTambahBarang:!0})}).catch(function(a){Object(s.t)("info","Terjadi Kesalhaan Saat Request Data, Coba Lagi"),e.setState({formTambahBarang:!0})}):this.props.dispatch(Object(s.R)()),this.props.dispatch(Object(b.f)(a)),Object(s.Q)("data_kategori_jenis",a),this.setState({formTambahBarang:!0})}},{key:"getBarangPesanan",value:function(){Object(c.c)("pesanan/no/"+this.state.noPesanan).then(function(a){return console.log(a.data)}).catch(function(a){return Object(s.t)("info",a.response.data)})}},{key:"handleSubmit",value:function(a){var e=this;this.setState({isLoading:!0});var t={kode_barcode:a.kode_barcode,dataimage:a.foto},n={nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak};Object(s.L)("barang/edit/"+a.kode_barcode,n).then(function(){e.props.dispatch(Object(s.F)())}).then(function(){void 0===a.foto||Object(s.L)("imagebarang/add",t).then(function(a){}).catch(function(a){})}).then(function(){e.setState({databarang:[]}),e.props.dispatch(Object(s.P)("HeadEditDataBarang")),e.props.dispatch(Object(b.e)(!1))}).then(function(){Object(s.t)("success","Data Berhasil Disimpan")}).then(function(){e.setState({isLoading:!1})}).catch(function(a){e.setState({isLoading:!1}),Object(s.t)("info","Barang Gagal Di Edit")})}},{key:"getNomorPesanan",value:function(a){var e=this;this.setState({isLoadingPesanan:!0}),Object(c.i)("pesanan/valid/no",{no_pesanan:a.value.trim()}).then(function(t){e.setState({isLoadingPesanan:!1});var n=Object(s.D)("kode_lokasi_toko"),r=Object(s.D)("kode_jenis"),o=Object(s.D)("kode_group"),i=[];t.data.detail_barang.forEach(function(t){"-"===t.kode_barcode?i={kode_barcode:t.kode_barcode,nama_atribut:t.attribut||"-",harga_atribut:t.harga_atribut||0,kode_intern:"-",kadar:t.perkiraan_kadar,nama_barang:t.keterangan,ongkos:t.ongkos||0,kadar_cetak:0,kadar_modal:t.kadar_modal||0,kode_kategori:o,kode_jenis:r,kode_lokasi_toko:n,berat:t.perkiraan_berat,berat_asli:t.perkiraan_berat||0,berat_atribut:t.berat_atribut||0,berat_plastik:t.berat_plastik||0,tag_id:t.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}:Object(c.c)("imagebarang/get/by-kode-barcode/"+t.kode_barcode).then(function(d){e.setState({isLoadingPesanan:!1}),i={foto:d.data.dataimage||"",kode_barcode:t.kode_barcode,nama_atribut:t.attribut||"-",harga_atribut:t.harga_atribut||0,kode_intern:"-",kadar:t.perkiraan_kadar,nama_barang:t.keterangan,ongkos:t.ongkos||0,kadar_cetak:0,kadar_modal:t.kadar_modal||0,kode_kategori:o,kode_jenis:r,kode_lokasi_toko:n,berat:t.perkiraan_berat,berat_asli:t.perkiraan_berat||0,berat_atribut:t.berat_atribut||0,berat_plastik:t.berat_plastik||0,tag_id:t.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}}).catch(function(d){e.setState({isLoadingPesanan:!1}),i={kode_barcode:t.kode_barcode,nama_atribut:t.attribut||"-",harga_atribut:t.harga_atribut||0,kode_intern:"-",kadar:t.perkiraan_kadar,kadar_cetak:0,kadar_modal:t.kadar_modal||0,kode_kategori:o,nama_barang:t.keterangan,ongkos:t.ongkos||0,kode_jenis:r,kode_lokasi_toko:n,berat:t.perkiraan_berat,berat_asli:t.perkiraan_berat||0,berat_atribut:t.berat_atribut||0,berat_plastik:t.berat_plastik||0,tag_id:t.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}})}),e.props.dispatch(Object(s.R)()),e.props.dispatch(Object(b.f)(i)),e.setState({formTambahBarang:!0,fromModalPesanan:!1})}).catch(function(a){e.setState({isLoadingPesanan:!1}),Object(s.t)("info",void 0===a.response?"Terjadi Kesalahan Saat Request Data":a.response.data.message)})}},{key:"render",value:function(){var a=this,e={renderer:function(a){return s.n.createElement("div",{className:"container"},s.n.createElement("div",{className:"row"},s.n.createElement("div",{className:"col-12"},"Nama Atribut : ",a.nama_atribut," ",s.n.createElement("br",null),"Berat Atribut : ",a.berat_atribut," ",s.n.createElement("br",null),"Berat Plastik : ",a.berat_plastik," ",s.n.createElement("br",null),"Harga Atribut : ",a.harga_atribut," ",s.n.createElement("br",null),"Kode Intern : ",a.kode_intern," ",s.n.createElement("br",null),"Kadar : ",a.kadar," ",s.n.createElement("br",null),"Kadar Cetak : ",a.kadar_cetak," ",s.n.createElement("br",null),"Kode Toko : ",a.kode_toko," ",s.n.createElement("br",null),"Kode Gudang : ",a.kode_gudang," ",s.n.createElement("br",null),"Stock : ",a.stock_on_hand," ",s.n.createElement("br",null))))},showExpandColumn:!0,expandByColumnOnly:!0};return s.n.createElement("div",null,s.n.createElement("ol",{className:"breadcrumb float-xl-right"},s.n.createElement("li",{className:"breadcrumb-item"},s.n.createElement(s.g,{to:"#"},"Barang")),s.n.createElement("li",{className:"breadcrumb-item active"},"Tambah Barang")),s.n.createElement("h1",{className:"page-header"},"Tambah Barang "),s.n.createElement(s.k,null,s.n.createElement(s.m,null,"Tambah Data Barang"),s.n.createElement("br",null),s.n.createElement(s.l,null,s.n.createElement(h,{onSubmit:function(e){return a.showModalTambahBarang(e)},barangPesanan:this.showBarangPesanan}))),s.n.createElement(s.k,null,s.n.createElement(s.m,null,"Data Barang"),s.n.createElement("br",null),s.n.createElement(s.l,null,s.n.createElement(s.s,{keyField:"kode_barcode",exportCsv:!0,data:this.state.databarang,columns:this.state.columns,empty:!0,textEmpty:this.state.loadingData?s.n.createElement(s.n.Fragment,null," ",s.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"):"Data Barang Kosong",expandRow:e})),s.n.createElement("br",null),s.n.createElement(s.i,{size:"l",title:this.state.formTambahBarang?"Tambah Barang":this.state.fromModalPesanan?"Barang Pesanan":"Edit Barang",content:this.state.formTambahBarang?s.n.createElement(b.a,{isLoading:this.state.isLoading,onSubmit:function(e){return a.tambahbarang(e)}}):this.state.fromModalPesanan?s.n.createElement(p,{isLoadingPesanan:this.state.isLoadingPesanan,getNomorPesanan:function(e){return a.getNomorPesanan(e)},onSubmit:function(e){return a.tambahbarang(e)}}):s.n.createElement(b.c,{isLoading:this.state.isLoading,onSubmit:function(e){return a.handleSubmit(e)}})})))}}]),t}(s.n.Component);e.default=Object(s.u)()(f)}}]);
//# sourceMappingURL=48.b7813273.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{1161:function(t,e,a){"use strict";a.r(e);var n=a(19),r=a(20),i=a(50),o=a(22),l=a(21),c=a(2),s=a(13),u=function(t){Object(o.a)(a,t);var e=Object(l.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).state={date:new Date},r.setStartDate=r.setStartDate.bind(Object(i.a)(r)),r.setLastDate=r.setLastDate.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"handleSubmit",value:function(t){}},{key:"setStartDate",value:function(t){this.setState({tgl_awal:new Date(t)})}},{key:"setLastDate",value:function(t){this.setState({tgl_akhir:new Date(t)})}},{key:"render",value:function(){var t=this;return c.n.createElement("div",null,c.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(t){"Enter"===t.key&&t.preventDefault()},autoComplete:"off"},c.n.createElement("div",{className:"row"},c.n.createElement("div",{className:"col-lg-4"},c.n.createElement(c.c,{name:"tgl_awal",component:c.f,label:"Tanggal Dari",type:"text",selected:this.state.tgl_awal,onChange:function(e){return t.setStartDate(e)},placeholder:"Masukan Tanggal Dari",onFocus:function(){return setTimeout(function(){HideKeyboard.postMessage("")},100)}})),c.n.createElement("div",{className:"col-lg-4"},c.n.createElement(c.c,{name:"tgl_akhir",component:c.f,type:"text",selected:this.state.tgl_akhir,onChange:function(e){return t.setLastDate(e)},label:"Tanggal Akhir",placeholder:"Masukan Tanggal Akhir",onFocus:function(){return setTimeout(function(){HideKeyboard.postMessage("")},100)}})),c.n.createElement("div",{className:"col-lg-4"},c.n.createElement("div",{className:"text-right"},c.n.createElement("label",null,"\xa0"),c.n.createElement("button",{type:"submit",value:"PDF",name:"type_btn",className:"btn btn-primary btn-block"},this.props.isLoading?c.n.createElement(c.n.Fragment,null,c.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Titipan"))))))}}]),a}(c.n.Component);u=Object(c.O)({form:"HeadBatalTitipan",enableReinitialize:!0})(u);var m=Object(c.u)(function(t){return{initialValues:{tgl_awal:Object(c.E)(),tgl_akhir:Object(c.E)()}}})(u),d=a(58),b=a.n(d),p=a(28),g=function(t){Object(o.a)(a,t);var e=Object(l.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).state={isLoading:!1,batal:!1,datatitipan:[],databaki:[],columns:[{dataField:"no_titip_group",text:"No Titip",footerAttrs:{colSpan:"4"},footer:"Total"},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"nama_customer",text:"Nama Customer"},{dataField:"total_dp",text:"Total Dp",formatter:function(t,e,a){return c.n.createElement("span",null,parseInt(e.total_dp).toLocaleString("kr-KO"))},footer:function(t){return parseInt(t.reduce(function(t,e){return t+e},0)).toLocaleString("kr-KO")}},{dataField:"harga_total",text:"Total Harga",formatter:function(t){return c.n.createElement("span",null," ",parseInt(t).toLocaleString("kr-KO"))},footer:function(t){return parseInt(t.reduce(function(t,e){return t+e},0)).toLocaleString("kr-KO")}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(t,e,a){return c.n.createElement("div",{className:"row text-center"},c.n.createElement("div",{className:"col-12"},c.n.createElement("button",{type:"button",disabled:"FINIS"===e.status_titipan,"data-tooltip":"FINIS"!==e.status_titipan?"Batal Titipan":"Tidak Bisa Dibatal",onClick:function(){return r.showPilihBaki(e.no_titip_group)},className:"btn btn-danger mr-3"},c.n.createElement("i",{className:"fa fa-window-close"}))))},footer:""}]},r.handleSubmit=r.handleSubmit.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"batalTitipan",value:function(){var t=this;c.r.fire({title:"Anda Yakin !!",text:"Ingin Membatalkan Titipan Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(e){if(e.isConfirmed){t.setState({batal:!0});var a=Object(c.D)("tgl_laporan");Object(s.n)("titip/cancel",{no_titip_group:t.state.no_titip_group,kode_toko:t.state.kode_baki}).then(function(e){t.setState({batal:!1}),Object(c.t)("success","Titipan Berhasil Di Batal"),t.props.dispatch(Object(c.F)()),Object(s.d)("titip/date/"+a.tgl_awal+"/"+a.tgl_akhir).then(function(e){var a=[];e.data.filter(function(t,n){var r={no_titip_group:t.no_titip_group,kode_barcode:t.kode_barcode,nama_barang:t.nama_barang,kode_customer:t.kode_customer,nama_customer:t.nama_customer,nama_atribut:t.nama_atribut,no_hp:t.no_hp,alamat_customer:t.alamat_customer,berat_atribut:t.berat_atribut,harga_atribut:t.harga_atribut,ongkos:t.ongkos,harga_total:t.harga_total,total_dp:e.data.findIndex(function(e){return e.no_titip_group===t.no_titip_group})===n?t.total_dp:0};return a.push(r),r}),t.setState({datatitipan:a})})}).catch(function(t){Object(c.t)("info",/conflict/i.test(t.response.data.message||"Error")?"Terjadi Kesalahan Saat Mengirim Data":t.response.data.message)})}else t.setState({batal:!1})})}},{key:"showPilihBaki",value:function(t){this.setState({no_titip_group:t}),this.props.dispatch(Object(c.R)())}},{key:"componentDidMount",value:function(){var t=this;this.context.handleSetPageSidebar(!1),this.context.handleSetPageHeader(!1),Object(s.c)("baki/ready").then(function(e){t.setState({databaki:e.data})})}},{key:"handleSubmit",value:function(t){var e=this;this.setState({isLoading:!0}),Object(s.d)("titip/date/"+t.tgl_awal+"/"+t.tgl_akhir).then(function(a){if(0===a.data.length)Object(c.t)("info","Data Yang Anda Cari Tidak Ada"),e.setState({isLoading:!1});else{Object(c.t)("success","Data Titipan Tersedia");var n={tgl_awal:Object(c.y)(Object(c.K)(new Date(t.tgl_awal)).format("YYYY-MM-DD")),tgl_akhir:Object(c.y)(Object(c.K)(new Date(t.tgl_akhir)).format("YYYY-MM-DD"))},r=[];a.data.filter(function(t,e){var n={no_titip_group:t.no_titip_group,kode_barcode:t.kode_barcode,nama_barang:t.nama_barang,kode_customer:t.kode_customer,nama_customer:t.nama_customer,nama_atribut:t.nama_atribut,no_hp:t.no_hp,alamat_customer:t.alamat_customer,berat_atribut:t.berat_atribut,harga_atribut:t.harga_atribut,ongkos:t.ongkos,harga_total:t.harga_total,total_dp:a.data.findIndex(function(e){return e.no_titip_group===t.no_titip_group})===e?t.total_dp:0};return r.push(n),n}),e.setState({isLoading:!1,datatitipan:r}),Object(c.Q)("tgl_laporan",n)}}).catch(function(t){Object(c.t)("info",void 0===t.response?"Terjadi Kesalahan Saat Request Data":t.response.data.message),e.setState({isLoading:!1})})}},{key:"render",value:function(){var t=this,e={renderer:function(t){return c.n.createElement("div",{className:"container"},c.n.createElement("div",{className:"row"},c.n.createElement("div",{className:"col-12"},"NONMEMBER"===t.kode_customer?"":"kode Customer :"+t.kode_customer+c.n.createElement(c.n.Fragment,null," ",c.n.createElement("br",null)," "),"No Hp : ",t.no_hp," ",c.n.createElement("br",null),"Alamat Customer : ",t.alamat_customer," ",c.n.createElement("br",null),"Nama Atribut : ",t.nama_atribut," ",c.n.createElement("br",null),"Betat Atribut : ",t.berat_atribut.toFixed(3)," ",c.n.createElement("br",null),"Harga Atribut : ",t.harga_atribut.toLocaleString("kr-KO")," ",c.n.createElement("br",null),"Ongkos : ",t.ongkos.toLocaleString("kr-KO")," ",c.n.createElement("br",null))))},showExpandColumn:!0,expandByColumnOnly:!0};return c.n.createElement("div",null,c.n.createElement(c.g,{to:"/SubMenuPenjualan"},c.n.createElement("button",{type:"button",className:"btn btn-secondary","data-tut":"reactour_4"},c.n.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," Home")),c.n.createElement("br",null),c.n.createElement("br",null),c.n.createElement(c.k,null,c.n.createElement(c.m,null,"Lihat Titipan"),c.n.createElement("br",null),c.n.createElement(c.l,null,c.n.createElement(m,{isLoading:this.state.isLoading,onSubmit:function(e){return t.handleSubmit(e)}}),c.n.createElement(c.s,{keyField:"kode_barcode",exportCsv:!1,data:this.state.datatitipan,columns:this.state.columns,empty:!0,textEmpty:"Data Barang Kosong",expandRow:e})),c.n.createElement("br",null)),c.n.createElement(c.i,{title:"Pilih Baki",size:"l",content:c.n.createElement(c.n.Fragment,null,c.n.createElement("div",{className:"col-lg-12"},c.n.createElement(c.c,{name:"kode_baki",component:c.q,options:this.state.databaki.filter(function(t){return void 0!==t.kode_baki}).map(function(t){return{value:t.kode_baki,name:t.kode_baki}}),onChange:function(e){return t.setState({kode_baki:e})},label:"Kode Baki",placeholder:"Silahkan Pilih Kode Lokasi"})),c.n.createElement("div",{className:"col-lg-12"},c.n.createElement("button",{className:"btn btn-primary",disabled:this.state.batal,onClick:function(){return t.batalTitipan()},type:"button"},this.state.batal?c.n.createElement(c.n.Fragment,null,c.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal")))}),this.state.batal?c.n.createElement(b.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null,this.state.isLoading?c.n.createElement(b.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),a}(c.n.Component);g.contextType=p.a,g=Object(c.O)({form:"BatalTitipan",enableReinitialize:!0})(g);e.default=Object(c.u)()(g)}}]);
//# sourceMappingURL=115.911593d3.chunk.js.map